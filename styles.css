* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Outfit', sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    color: #333;
}


/* Container pour les toasts */
.toastContainer {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    pointer-events: none;
}

/* Style de base d'un toast */
.toast {
    min-width: 300px;
    max-width: 400px;
    padding: 16px 20px;
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    display: flex;
    align-items: center;
    gap: 12px;
    pointer-events: auto;
    cursor: pointer;
    animation: slideIn 0.3s ease;
    transition: all 0.3s ease;
    color: white !important;
}

.toast:hover {
    transform: translateX(-5px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
}

/* Animation d'entrÃ©e */
@keyframes slideIn {
    from {
        transform: translateX(400px);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Animation de sortie */
@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }

    to {
        transform: translateX(400px);
        opacity: 0;
    }
}

.toast.removing {
    animation: slideOut 0.3s ease;
}

/* IcÃ´ne du toast */
.toast-icon {
    font-size: 28px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

/* Contenu du toast */
.toast-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.toast-title {
    font-weight: 800;
    font-size: 15px;
    color: #fff !important;
}

.toast-message {
    font-size: 13px;
    color: #ccc !important;
    line-height: 1.4;
}

/* Bouton de fermeture */
.toast-close {
    font-size: 20px;
    color: #999;
    cursor: pointer;
    flex-shrink: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s;
}

.toast-close:hover {
    background: rgba(0, 0, 0, 0.05);
    color: #333;
}

/* Types de toasts */
.toast-success {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
    border-left: 4px solid #28a745;
}

.toast-success .toast-icon {
    background: rgba(40, 167, 69, 0.1);
    color: #28a745;
}

.toast-info {
    background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
    border-left: 4px solid #17a2b8;
}

.toast-info .toast-icon {
    background: rgba(23, 162, 184, 0.1);
    color: #17a2b8;
}

.toast-warning {
    background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
    border-left: 4px solid #ffc107;
}

.toast-warning .toast-icon {
    background: rgba(255, 193, 7, 0.1);
    color: #ffc107;
}

.toast-error {
    background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
    border-left: 4px solid #dc3545;
}

.toast-error .toast-icon {
    background: rgba(220, 53, 69, 0.1);
    color: #dc3545;
}

.toast-shiny {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    border-left: 4px solid #ffd700;
    box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);
}

.toast-shiny .toast-icon {
    background: rgba(255, 215, 0, 0.2);
    color: #ff8c00;
    animation: pulse 1s infinite;
}

@keyframes pulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }
}

.toast-legendary {
    background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
    border-left: 4px solid #6c3483;
    color: white;
}

.toast-legendary .toast-icon {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

.toast-legendary .toast-title,
.toast-legendary .toast-message {
    color: white;
}

.toast-legendary .toast-close {
    color: rgba(255, 255, 255, 0.8);
}

.toast-legendary .toast-close:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}





.battle-sprite {
    width: 96px;
    height: 96px;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
    animation: sprite-float 2s ease-in-out infinite;
}

@keyframes sprite-float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-8px);
    }
}

.battle-sprite-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}


/* --- LAYOUT DASHBOARD PC (3 COLONNES) --- */

.game-container {
    display: grid;
    /* 1. GAUCHE (320px) | 2. CENTRE (Flexible) | 3. DROITE (400px) */
    grid-template-columns: 520px 1fr 520px;

    /* Ligne 1 : Header | Ligne 2 : Contenu Principal */
    grid-template-rows: auto 1fr;

    /* Prend toute la hauteur de la fenÃªtre, sans scrollbar sur le body */
    height: 100vh;
    width: 100vw;
    overflow: hidden;

    gap: 20px;
    padding: 20px;
    background: #2c3e50;
    /* Fond global plus sombre pour faire ressortir les panneaux */
}

/* --- HEADER FINAL : DASHBOARD BLANC UNIFIÃ‰ --- */

/* --- HEADER FINAL : REDESIGN POKEMON --- */

.header {
    background: #947864;
    border: 4px solid #5d4a3e;
    border-radius: 12px;
    padding: 30px 15px 15px 15px;
    /* Padding top pour la barre de titre */
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 6px 0 #5d4a3e, 0 10px 30px rgba(0, 0, 0, 0.3);
    grid-column: 1 / -1;
}

/* Les 3 boutons de fenÃªtre (rouge, jaune, vert) */
.header::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 15px;
    width: 12px;
    height: 12px;
    background: #ff5f56;
    border-radius: 50%;
    box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #27c93f;
    border: 1px solid rgba(0, 0, 0, 0.2);
}

/* Petite barre de "drag" ou titre au milieu */
.header::after {
    content: 'POKETIME HUD';
    position: absolute;
    top: 6px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    font-weight: 800;
    color: #5d4a3e;
    letter-spacing: 2px;
    text-transform: uppercase;
    font-family: 'Outfit', sans-serif;
}

.header-unified-row {
    background: #bec3c6;
    border: 3px solid #3b3b3b;
    border-radius: 8px;
    padding: 12px;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    gap: 15px;
}

/* GROUPES INTERNES */
.combat-stats-group,
.resources-group,
.header-buttons {
    display: flex;
    align-items: center;
    gap: 8px;
}

/* --- 1. LES STATS --- */
.stat-chip {
    background: #3b3b3b;
    border: 2px solid #1a1a1a;
    border-bottom: 4px solid #111;
    border-radius: 6px;
    padding: 8px 12px;
    min-width: 110px;
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 6px;
    color: white;
    transition: transform 0.1s;
}

.stat-chip:hover {
    transform: scale(1.02);
}

.stat-chip-boost-icon {
    display: none !important;
}

#headerStatHP {
    border-left: 4px solid #ef4444;
}

#headerStatAtk {
    border-left: 4px solid #f59e0b;
}

#headerStatDef {
    border-left: 4px solid #3b82f6;
}

#headerStatSpAtk {
    border-left: 4px solid #ec4899;
}

#headerStatSpDef {
    border-left: 4px solid #10b981;
}

#headerStatSpd {
    border-left: 4px solid #8b5cf6;
}

.stat-label {
    font-size: 11px;
    font-weight: 800;
    color: #aaa;
    text-transform: uppercase;
}

.stat-value {
    font-size: 14px;
    font-weight: 800;
    color: #fff;
    font-family: 'Outfit', sans-serif;
}

.stat-sub-info {
    font-size: 10px;
    color: #4ade80;
    font-weight: 700;
    margin-left: auto;
}

.stat-sub-info span {
    color: #4ade80 !important;
}

/* --- 2. LES RESSOURCES --- */
.resource-chip {
    background: #3b3b3b;
    border: 2px solid #1a1a1a;
    border-bottom: 4px solid #111;
    border-radius: 6px;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 12px;
    height: 48px;
    color: white;
    transition: transform 0.1s;
}

.resource-chip:hover {
    transform: scale(1.02);
}

.resource-icon {
    font-size: 18px;
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.2));
}

.resource-val {
    font-size: 14px;
    font-weight: 800;
    color: #fff;
    font-family: 'Outfit', sans-serif;
}

.resource-name {
    font-size: 9px;
    font-weight: 700;
    color: #aaa;
    text-transform: uppercase;
}

/* --- 3. LES BOUTONS --- */
.header-buttons .btn,
.zone-details-btn,
.sort-btn,
.cmd-btn {
    background: #5d4a3e !important;
    border: 2px solid #3b3b3b !important;
    color: white !important;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.1s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    box-shadow: 0 4px 0 #3b3b3b;
    margin: 2px;
    font-family: 'Outfit', sans-serif;
}

.header-buttons .btn:hover,
.zone-details-btn:hover,
.sort-btn:hover,
.cmd-btn:hover {
    background: #7a614e !important;
    transform: translateY(2px);
    box-shadow: 0 2px 0 #3b3b3b;
}

.cmd-btn.forfeit {
    background: #6b7280 !important;
    /* Neutral gray-brown */
    box-shadow: 0 4px 0 #4b5563;
}

.cmd-btn.forfeit:hover {
    background: #4b5563 !important;
    box-shadow: 0 2px 0 #374151;
}

/* --- 2. COLONNE GAUCHE : GESTION (Ã‰quipe, Pension, Stockage) --- */
.team-area {
    grid-column: 1;
    grid-row: 2;
    background: #947864;
    border: 4px solid #5d4a3e;
    border-radius: 12px;
    padding: 30px 15px 15px 15px;
    box-shadow: 0 6px 0 #5d4a3e;
    position: relative;
    overflow-y: auto;
    height: 100%;
    scrollbar-width: thin;
    scrollbar-color: #5d4a3e transparent;
}



/* --- 2.5 STORAGE CONTROLS --- */
.storage-controls {
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
    border-radius: 8px !important;
    padding: 15px !important;
    margin-bottom: 20px !important;
    color: #3b3b3b !important;
    font-weight: 800;
}

.storage-controls input,
.storage-controls select {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    color: white !important;
    border-radius: 6px !important;
    padding: 8px 12px !important;
    font-family: 'Outfit', sans-serif !important;
}

.storage-controls input::placeholder {
    color: #888 !important;
}

.shop-wallet {
    text-align: center;
    margin-bottom: 20px;
    font-size: 18px;
    font-weight: 800;
    color: #3b3b3b !important;
    background: #bec3c6;
    padding: 10px;
    border-radius: 8px;
    border: 2px solid #3b3b3b;
}

.shop-wallet.tokens {
    color: #854d0e !important;
}

.shop-intro {
    color: #3b3b3b !important;
    font-weight: 800;
    margin-bottom: 15px;
    font-size: 13px;
}

.pokedex-controls {
    margin-bottom: 15px;
    padding: 10px;
    background: #bec3c6 !important;
    border-radius: 10px;
    border: 2px solid #3b3b3b;
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.pokedex-controls input,
.pokedex-controls select {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    color: white !important;
    border-radius: 6px !important;
    padding: 8px 12px !important;
    font-family: 'Outfit', sans-serif !important;
    font-size: 11px !important;
    font-weight: 800 !important;
}

.pokedex-controls input::placeholder {
    color: #888 !important;
}

/* --- 3. COLONNE CENTRALE : COMBAT (Action) --- */
.combat-area {
    grid-column: 2;
    grid-row: 2;
    background: #947864;
    border: 4px solid #5d4a3e;
    border-radius: 12px;
    padding: 30px 15px 15px 15px;
    box-shadow: 0 6px 0 #5d4a3e;
    position: relative;
    overflow-y: auto;
    height: 100%;
    scrollbar-width: thin;
    scrollbar-color: #5d4a3e transparent;
}


.combat-area .zone-selector,
.combat-area .battle-hud,
.combat-area .combat-controls-wrapper {
    background: #bec3c6;
    border: 3px solid #3b3b3b;
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 20px;
    color: #3b3b3b !important;
    font-weight: 800;
}

/* --- 4. COLONNE DROITE : EXTRAS (Boutique, QuÃªtes, etc.) --- */
.secondary-content {
    grid-column: 3;
    grid-row: 2;
    background: #947864;
    border: 4px solid #5d4a3e;
    border-radius: 12px;
    padding: 30px 15px 15px 15px;
    box-shadow: 0 6px 0 #5d4a3e;
    position: relative;
    display: flex !important;
    flex-direction: column;
    overflow-y: auto;
    height: 100%;
    scrollbar-width: thin;
    scrollbar-color: #5d4a3e transparent;
}

/* --- NETTOYAGE --- */

/* On cache dÃ©finitivement le bouton flottant "Extras" car tout est visible */
button[onclick="toggleSecondaryContent()"],
#toggleIcon {
    display: none !important;
}

.tab-btn,
.sub-tab-btn,
.tab-btn,
.sort-btn,
.zone-details-btn,
.header-buttons .btn,
.cmd-btn {
    font-family: 'Outfit', sans-serif !important;
    background: #5d4a3e !important;
    border: 2px solid #3b3b3b !important;
    color: white !important;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.1s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    box-shadow: 0 4px 0 #3b3b3b;
    margin: 2px;
    text-transform: uppercase;
}

.tab-btn:hover,
.sub-tab-btn:hover,
.sort-btn:hover,
.zone-details-btn:hover,
.header-buttons .btn:hover,
.cmd-btn:hover {
    background: #7a614e !important;
    transform: translateY(2px);
    box-shadow: 0 2px 0 #3b3b3b;
}

.tab-btn.active,
.sub-tab-btn.active {
    background: #3b3b3b !important;
    border-color: #1a1a1a !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5) !important;
    transform: translateY(2px);
    box-shadow: none !important;
}

.tab-content {
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
    border-radius: 8px !important;
    padding: 15px !important;
    margin-top: 10px !important;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    color: #1a1a1a !important;
}

.tab-content h3,
.tab-content h4 {
    color: #3b3b3b !important;
    text-shadow: none !important;
    font-weight: 800;
    text-transform: uppercase;
    border-bottom: 2px solid #3b3b3b;
    padding-bottom: 5px;
    margin-bottom: 15px;
}

.tower-stats,
.account-talents-box {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    color: white;
    text-align: center;
}

.account-talents-box {
    text-align: left;
}

.account-talents-box h4 {
    color: #fff !important;
    border-bottom: 1px solid #555;
    margin-bottom: 10px;
}

#badgesList {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 10px;
}

/* 2. Styles pour les nouveaux sous-onglets (dans la Boutique) */
.sub-tabs-container {
    display: flex;
    gap: 8px;
    margin-bottom: 15px;
    border-bottom: 2px solid #ddd;
}

.sub-tab-btn {
    padding: 8px 16px;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-weight: bold;
    color: #666;
    transition: all 0.2s ease;
}

.sub-tab-btn:hover {
    background: rgba(0, 0, 0, 0.05);
}

.sub-tab-btn.active {
    color: #667eea;
    border-bottom-color: #667eea;
}

.sub-tab-content {
    display: none;
    /* CachÃ© par dÃ©faut */
}

.sub-tab-content.active {
    display: block;
    /* AffichÃ© si actif */
}

.tab-content.active {
    display: block;
}



.creature-name {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;

    /* --- AJOUTS --- */
    display: flex;
    /* Permet d'aligner le nom et l'icÃ´ne */
    align-items: center;
    justify-content: center;
    /* Centre le nom et l'icÃ´ne ensemble */
    gap: 8px;
    /* Espace entre le nom et l'icÃ´ne */
}

/* Style pour la nouvelle icÃ´ne de statut (dans le nom) */
.status-icon {
    font-size: 16px;
    /* LÃ©gÃ¨rement plus petit que le texte */
    line-height: 1;
    /* EmpÃªche de dÃ©former la hauteur de ligne */
}

.creature-level {
    font-size: 13px;
    color: #fff;
    font-weight: 700;
    margin-bottom: 10px;
    opacity: 0.9;
}

.health-bar {
    width: 100%;
    height: 16px;
    background: #1a1a1a;
    border: 1px solid #000;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
    position: relative;
}


/* OPTIMISATION : Performance GPU Maximale */
.hud-player,
.hud-enemy {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px !important;
    padding: 12px !important;
    color: white !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
    font-family: 'Outfit', sans-serif !important;
}

.hud-header-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    margin-bottom: 10px;
    width: 100%;
}

.hud-player .creature-name,
.hud-enemy .creature-name {
    color: #fff !important;
    font-weight: 800 !important;
    text-shadow: none !important;
}

.hud-player .creature-level,
.hud-enemy .creature-level {
    color: #aaa !important;
    font-size: 11px !important;
}

/* OPTIMISATION : Performance GPU Maximale */
.health-fill {
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, #4ade80, #22c55e);
    transform-origin: left;
    transform: scaleX(1);
    transition: transform 0.3s ease-out, background-color 0.3s;

    /* â¬‡ï¸ AJOUT CRITIQUE â¬‡ï¸ */
    will-change: transform;
    /* Force le navigateur Ã  crÃ©er un calque Composite (GPU) pour cet Ã©lÃ©ment. 
       RÃ©sultat : ZÃ©ro recalcul de layout quand la barre bouge. */
}

.health-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    text-shadow: 1px 1px 2px black;
    font-size: 12px;
}

.vs-text {
    font-size: 24px;
    font-weight: bold;
    color: #333;
    margin: 0 20px;
}



.team-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

.creature-card {
    background: #3b3b3b;
    border: 2px solid #1a1a1a;
    border-bottom: 5px solid #111;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
    transition: transform 0.2s ease;
    position: relative;
    color: white;
}

.creature-card:hover {
    transform: translateY(-2px);
    background: #444;
}

.creature-card h4 {
    margin-bottom: 10px;
    color: #fff;
    font-weight: 800;
}

.creature-stats {
    font-size: 11px;
    color: #ccc !important;
    line-height: 1.5;
    font-family: 'Outfit', sans-serif;
}

.creature-stats strong {
    color: #fff;
}

.type-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    color: white;
    margin-bottom: 5px;
}

/* ... (Ajoutez ceci n'importe oÃ¹ dans votre balise <style>) ... */
.ultimate-btn {
    position: absolute;
    bottom: 5px;
    left: 5px;
    width: calc(100% - 10px);
    padding: 8px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(135deg, #666, #444);
    color: white;
    font-weight: bold;
    cursor: not-allowed;
    opacity: 1;
    transition: all 0.2s ease;
    z-index: 10;
    font-size: 12px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.ultimate-btn:not(:disabled) {
    background: linear-gradient(135deg, #f39c12, #e67e22);
    opacity: 1;
    cursor: pointer;
    animation: pulse-reward 2s infinite;
    box-shadow: 0 0 15px rgba(243, 156, 18, 1);
}

.ultimate-btn:not(:disabled):hover {
    transform: scale(1.05);
}



.type-fire {
    background: #ff6b35;
}

.type-water {
    background: #4dabf7;
}

.type-grass {
    background: #51cf66;
}

.type-electric {
    background: #ffd43b;
    color: #333;
}

.type-normal {
    background: #868e96;
}

.type-rock {
    background: #b8860b;
    color: white;
}

.type-flying {
    background: #87ceeb;
    color: #333;
}

.type-psychic {
    background: #ff1493;
    color: white;
}

.type-dark {
    background: #2c1e3f;
    color: white;
}

.type-steel {
    background: #b0b0b0;
    color: #333;
}

.type-dragon {
    background: #7038f8;
    color: white;
}

.type-fighting {
    background: #c03028;
    color: white;
}

.type-poison {
    background: #a040a0;
    color: white;
}

.type-ground {
    background: #e0c068;
    color: #333;
}

.type-bug {
    background: #a8b820;
    color: #333;
}

.type-ghost {
    background: #705898;
    color: white;
}

.type-ice {
    background: #98d8d8;
    color: #333;
}

.rarity-common {
    border: 1px solid #b0bec5;
    /* Gris */
    background: linear-gradient(135deg, #f5f5f5 0%, #eceff1 100%);
}

.rarity-rare {
    border: 1px solid #4caf50;
    /* Vert */
    background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);

}

.rarity-epic {
    border: 1px solid #9b59b6;
    /* Violet (cohÃ©rent avec le recycleur) */
    background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);

}

.rarity-legendary {
    border: 1px solid #fbc02d;
    /* Or */
    background: linear-gradient(135deg, #fffde7 0%, #fff9c4 100%);

    animation: legendary-glow 2s ease-in-out infinite alternate;
}

.creature-card.shiny {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 25%, #ffd700 50%, #ffed4e 75%, #ffd700 100%);
    background-size: 200% 200%;
    animation: shiny-sparkle 2s ease-in-out infinite, gradient-shift 3s ease infinite;
    border: 1px solid #ffd700;
}



@keyframes shiny-sparkle {

    0%,
    100% {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.8),
            0 0 40px rgba(255, 215, 0, 0.4),
            inset 0 0 20px rgba(255, 255, 255, 0.3);
    }

    50% {
        box-shadow: 0 0 30px rgba(255, 215, 0, 1),
            0 0 60px rgba(255, 215, 0, 0.6),
            inset 0 0 30px rgba(255, 255, 255, 0.5);
    }
}



.creature-card.shiny::before {
    content: 'âœ¨';
    position: absolute;
    top: 5px;
    right: 5px;
    font-size: 24px;
    animation: sparkle-rotate 4s linear infinite;
}

@keyframes gradient-shift {

    0%,
    100% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }
}

@keyframes sparkle-rotate {

    0%,
    100% {
        transform: rotate(0deg) scale(1);
    }

    25% {
        transform: rotate(90deg) scale(1.2);
    }

    50% {
        transform: rotate(180deg) scale(1);
    }

    75% {
        transform: rotate(270deg) scale(1.2);
    }
}

.shiny-label {
    display: inline-block;
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #333;
    padding: 3px 8px;
    border-radius: 8px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 5px;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.rarity-label {
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 8px;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 5px;
    display: inline-block;
}

.rarity-label.common {
    background: #6c757d;
    color: white;
}

.rarity-label.rare {
    background: #28a745;
    color: white;
}

.rarity-label.epic {
    background: #007bff;
    color: white;
}

.rarity-label.legendary {
    background: #ffc107;
    color: #333;
}

.exp-bar {
    width: 100%;
    height: 10px;
    background: #ddd;
    border-radius: 5px;
    overflow: hidden;
    margin-top: 10px;
}

.exp-fill {
    height: 100%;
    background: linear-gradient(90deg, #845ec2, #b39bc8);
    transition: width 0.3s ease;
}

.balls-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 15px;
}

.ball-item {
    background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: transform 0.2s ease;
}

.ball-item:hover {
    transform: translateY(-2px);
}



.save-load-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.btn {
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.2s ease;
}

.btn-save {
    background: #28a745;
    color: white;
}

.btn-save:hover {
    background: #218838;
}

.btn-load {
    background: #007bff;
    color: white;
}

.btn-load:hover {
    background: #0056b3;
}

.btn-reset {
    background: #dc3545;
    color: white;
}

.btn-reset:hover {
    background: #c82333;
}

.btn-buffs {
    background: #17a2b8;
    color: white;
}

.btn-buffs:hover {
    background: #138496;
}

.btn-stats {
    background: #6f42c1;
    color: white;
}

.btn-stats:hover {
    background: #5a32a3;
}

.stats-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(3px);
}

.stats-modal.show {
    display: flex;
}

.stats-content,
.quest-guide-content,
.quest-completion-content,
.modal-content,
.log-modal-content {
    background: #947864 !important;
    border: 4px solid #5d4a3e !important;
    padding: 30px 15px 15px 15px !important;
    border-radius: 12px !important;
    max-width: 800px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 0 6px 0 #5d4a3e !important;
    font-family: 'Outfit', sans-serif !important;
}

.stats-content::before,
.quest-guide-content::before,
.quest-completion-content::before,
.modal-content::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 15px;
    width: 10px;
    height: 10px;
    background: #ff5f56;
    border-radius: 50%;
    box-shadow: 18px 0 0 #ffbd2e, 36px 0 0 #27c93f;
    border: 1px solid rgba(0, 0, 0, 0.2);
    z-index: 10;
}

.stats-header,
.quest-guide-header,
.modal-header,
.modal-header-logs {
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
    border-radius: 8px !important;
    padding: 10px 15px !important;
    margin-bottom: 15px !important;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: #3b3b3b !important;
}

.stats-header h2,
.quest-guide-header h3,
.modal-header h2,
.modal-header-logs h2 {
    margin: 0 !important;
    color: #3b3b3b !important;
    font-weight: 800 !important;
    font-size: 16px !important;
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
}

.stats-close,
.quest-guide-close,
.close-modal,
.close-btn {
    background: #5d4a3e !important;
    color: white !important;
    border: 2px solid #3b3b3b !important;
    padding: 4px 12px !important;
    border-radius: 6px !important;
    cursor: pointer;
    font-weight: 800 !important;
    font-size: 12px !important;
    box-shadow: 0 3px 0 #3b3b3b !important;
    transition: all 0.1s !important;
}

.stats-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 32px;
    height: 32px;
    padding: 0 !important;
    background: #ef4444 !important;
    color: white !important;
    border: 2px solid #dc2626 !important;
    border-radius: 50% !important;
    font-size: 18px !important;
    font-weight: 800 !important;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
    transition: all 0.2s !important;
    z-index: 100;
}

.stats-close:hover {
    background: #dc2626 !important;
    transform: scale(1.1);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4) !important;
}

.quest-guide-close:hover,
.close-modal:hover,
.close-btn:hover {
    background: #7a614e !important;
    transform: translateY(2px);
    box-shadow: 0 1px 0 #3b3b3b !important;
}

.pension-contribution-trigger {
    cursor: default;
}

.pension-contribution-btn {
    display: inline-block;
    margin-left: 6px;
    padding: 2px 8px;
    font-size: 11px;
    color: #fff !important;
    background: #8b5cf6 !important;
    /* More vibrant purple */
    border: 1px solid #7c3aed !important;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 800;
}

.pension-contribution-trigger:hover .pension-contribution-btn {
    background: rgba(255, 20, 147, 0.25);
    text-decoration: underline;
}

.pension-contribution-popover {
    display: none;
    position: fixed;
    z-index: 10001;
    min-width: 260px;
    max-width: 320px;
    padding: 12px 14px;
    background: linear-gradient(180deg, #fff 0%, #f8fafc 100%);
    border: 1px solid rgba(255, 20, 147, 0.35);
    border-radius: 10px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
    pointer-events: auto;
}

.pension-contribution-popover.show {
    display: block;
}

.team-contribution-trigger {
    cursor: default;
}

.team-contribution-btn {
    display: inline-block;
    margin-left: 6px;
    padding: 2px 8px;
    font-size: 11px;
    color: #fff !important;
    background: #15803d !important;
    /* Darker green */
    border: 1px solid #14532d !important;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 800;
}

.team-contribution-trigger:hover .team-contribution-btn {
    background: rgba(34, 197, 94, 0.3);
    text-decoration: underline;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
}

.stat-box {
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    padding: 15px;
    border-radius: 10px;
    border-left: 4px solid #667eea;
}

.stat-box.highlight {
    background: linear-gradient(135deg, #fff3cd, #ffeaa7);
    border-left-color: #ffc107;
}

.stat-title {
    font-size: 12px;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 5px;
}

.stat-number {
    font-size: 28px;
    font-weight: bold;
    color: #333;
}

.stat-subtitle {
    font-size: 11px;
    color: #999;
    margin-top: 3px;
}

.auto-save-indicator {
    font-size: 12px;
    color: #666;
    margin-left: auto;
    align-self: center;
}

h2,
h3 {
    margin-bottom: 15px;
    color: #333;
}

.damage-fire {
    color: #ff6b35;
    font-weight: bold;
}

.damage-water {
    color: #4dabf7;
    font-weight: bold;
}

.damage-grass {
    color: #51cf66;
    font-weight: bold;
}

.damage-electric {
    color: #ffd43b;
    font-weight: bold;
}

.damage-normal {
    color: #868e96;
    font-weight: bold;
}

.damage-rock {
    color: #b8860b;
    font-weight: bold;
}

.damage-flying {
    color: #87ceeb;
    font-weight: bold;
}

.damage-psychic {
    color: #ff1493;
    font-weight: bold;
}

.damage-dark {
    color: #2c1e3f;
    font-weight: bold;
}

.damage-steel {
    color: #b0b0b0;
    font-weight: bold;
}

.damage-dragon {
    color: #7038f8;
    font-weight: bold;
}

.damage-fighting {
    color: #c03028;
    font-weight: bold;
}

.damage-poison {
    color: #a040a0;
    font-weight: bold;
}

.damage-ground {
    color: #e0c068;
    font-weight: bold;
}

.damage-bug {
    color: #a8b820;
    font-weight: bold;
}

.damage-ghost {
    color: #705898;
    font-weight: bold;
}

.damage-ice {
    color: #98d8d8;
    font-weight: bold;
}

.sort-btn {
    padding: 6px 10px;
    background: #5d4a3e !important;
    color: white !important;
    border: 2px solid #3b3b3b !important;
    border-radius: 6px;
    cursor: pointer;
    font-size: 10px;
    font-weight: 800;
    transition: all 0.1s ease;
    box-shadow: 0 4px 0 #3b3b3b;
    text-transform: uppercase;
}

.sort-btn:hover {
    background: #7a614e !important;
    transform: translateY(1px);
    box-shadow: 0 3px 0 #3b3b3b;
}

.sort-btn.active {
    background: #3b3b3b !important;
    color: white !important;
    border-color: #1a1a1a !important;
    transform: translateY(2px) !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5) !important;
}

.sort-btn.active::after {
    content: " â†“";
}

.sort-btn.active.asc::after {
    content: " â†‘";
}

/* --- Conteneur Nom + Badge (Fixe le nom au centre) --- */
.hud-name-row {
    position: relative;
    /* Important : sert de repÃ¨re au badge */
    display: flex;
    justify-content: center;
    /* Centre le nom horizontalement */
    align-items: center;
    /* Centre verticalement */
    margin-bottom: 5px;
    height: 24px;
    /* Hauteur fixe pour Ã©viter les sauts */
}

/* Le Nom de l'ennemi */
.hud-enemy .creature-name {
    margin: 0 !important;
    text-align: center;
    z-index: 1;
}

/* --- Indicateur d'efficacitÃ© (Badge flottant Ã  droite) --- */
.effectiveness-indicator {
    position: absolute;
    /* Sort du flux pour ne pas pousser le nom */
    right: 0;
    /* CollÃ© Ã  droite */
    top: 50%;
    /* CentrÃ© verticalement */
    transform: translateY(-50%);

    font-size: 9px;
    font-weight: 800;
    text-transform: uppercase;
    padding: 2px 6px;
    border-radius: 6px;
    line-height: 1;
    white-space: nowrap;
    display: none;
    /* CachÃ© par dÃ©faut */
    opacity: 0.9;
    transition: all 0.3s ease;
}

/* Animation d'apparition */
.effectiveness-indicator.show {
    display: inline-block;
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popIn {
    from {
        transform: translateY(-50%) scale(0);
        opacity: 0;
    }

    to {
        transform: translateY(-50%) scale(1);
        opacity: 0.9;
    }
}

/* Couleurs */
.super-effective {
    background: #dcfce7;
    color: #166534;
    border: 1px solid #86efac;
}

.not-effective {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #fca5a5;
}

.normal-effective {
    display: none !important;
}

.auto-select-btn {
    padding: 10px 20px;
    background: #6b7280 !important;
    /* Neutral Gray-Brown for OFF state */
    color: white !important;
    border: 2px solid #4b5563 !important;
    border-radius: 8px;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.1s ease;
    font-size: 13px;
    height: 44px;
    flex-shrink: 0;
    box-shadow: 0 4px 0 #3b3b3b;
    text-transform: uppercase;
}

.auto-select-btn:hover {
    background: #4b5563 !important;
    transform: translateY(1px);
    box-shadow: 0 3px 0 #3b3b3b;
}

.auto-select-btn.auto-active {
    background: #15803d !important;
    /* Dark Green for ON state */
    border-color: #14532d !important;
    color: white !important;
    box-shadow: 0 4px 0 #14532d, 0 0 10px rgba(34, 197, 94, 0.3);
}

.auto-select-btn.auto-active:hover {
    background: #166534 !important;
}

.auto-select-btn:disabled {
    cursor: not-allowed;
    opacity: 0.5;
}

.auto-select-btn.hidden {
    display: none !important;
}

/* âœ… NOUVEAU : Conteneur pour aligner les boutons horizontalement */
.combat-buttons-container {
    display: flex;
    gap: 10px;
    justify-content: center;
    align-items: center;
    margin-top: 10px;
    flex-shrink: 0;
}

/* --- UPGRADES --- */
.upgrades-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
}

.upgrade-card {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-bottom: 5px solid #111 !important;
    border-radius: 8px !important;
    padding: 15px !important;
    color: white !important;
    transition: transform 0.2s ease !important;
}

.upgrade-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
}

.upgrade-title {
    font-size: 14px !important;
    font-weight: 800 !important;
    color: #fff !important;
    margin-bottom: 5px !important;
}

.upgrade-description,
.upgrade-desc {
    font-size: 13px !important;
    color: #fff !important;
    line-height: 1.4 !important;
    margin-bottom: 10px !important;
}

.upgrade-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding: 10px;
    background: #bec3c6 !important;
    border-radius: 8px;
    border: 2px solid #3b3b3b;
    color: #3b3b3b !important;
    font-weight: 800;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

.upgrade-level {
    color: #854d0e !important;
}

.upgrade-effect {
    font-size: 11px;
    color: #166534 !important;
    /* Vert foncÃ© */
    font-weight: 800;
}

.upgrade-cost {
    font-size: 14px !important;
    font-weight: 800 !important;
    color: #4ade80 !important;
    margin-bottom: 10px !important;
    display: block !important;
}

.upgrade-btn {
    width: 100%;
    padding: 12px !important;
    background: linear-gradient(135deg, #3b82f6, #2563eb) !important;
    color: white !important;
    border: 2px solid #1e40af !important;
    border-radius: 6px !important;
    font-weight: 900 !important;
    cursor: pointer;
    box-shadow: 0 4px 0 #1e3a8a !important;
    font-size: 12px !important;
    text-transform: uppercase !important;
    transition: all 0.15s ease !important;
}

.upgrade-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #2563eb, #1d4ed8) !important;
    transform: translateY(2px) !important;
    box-shadow: 0 2px 0 #1e3a8a !important;
}

.upgrade-btn:disabled {
    background: #6b7280 !important;
    border-color: #4b5563 !important;
    cursor: not-allowed;
    box-shadow: 0 4px 0 #374151 !important;
    transform: none !important;
    color: #e5e7eb !important;
    font-size: 11px !important;
    text-align: center !important;
    font-weight: 800 !important;
}

.upgrade-card.not-affordable,
.shop-item.not-affordable {
    filter: grayscale(0.6) opacity(0.85);
    background: #2d2d2d !important;
}

.upgrade-btn:disabled:hover {
    background: #ccc;
}


/* =========================================
   SYSTÃˆME DE QUÃŠTES (Design Dashboard)
   [TAILLE COMPACTE - AJUSTEMENT TYPO & BOUTON]
   ========================================= */

/* --- 1. CONTENEUR & STATS --- */
.quest-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
}

.quest-stats {
    display: flex;
    justify-content: space-around;
    padding: 10px;
    background: white;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    margin-bottom: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.quest-stat {
    text-align: center;
}

.quest-stat-value {
    font-size: 19px;
    /* AugmentÃ© de 18px */
    font-weight: 800;
    color: #f59e0b;
}

.quest-stat-label {
    font-size: 10px;
    /* AugmentÃ© de 9px */
    color: #64748b;
    text-transform: uppercase;
    font-weight: 600;
    letter-spacing: 0.4px;
}

/* --- 2. CARTES DE QUÃŠTES --- */
.quest-card {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-left: 5px solid #5d4a3e !important;
    border-radius: 8px !important;
    padding: 12px !important;
    color: white !important;
    margin-bottom: 10px !important;
}

.quest-card.accepted {
    border-left-color: #3b82f6 !important;
}

.quest-card.completed {
    border-left-color: #22c55e !important;
    opacity: 0.8 !important;
}

.quest-title {
    font-weight: 800 !important;
    color: #fff !important;
    margin-bottom: 5px !important;
}

.pokedex-entry {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-bottom: 5px solid #111 !important;
    border-radius: 8px !important;
    padding: 12px !important;
    color: white !important;
    text-align: center !important;
    transition: transform 0.1s;
}

.pokedex-entry:hover {
    transform: translateY(-2px);
    background: #444;
}

.pokedex-entry.locked {
    opacity: 0.4 !important;
    filter: grayscale(0.8) contrast(1.2) !important;
}

.pokedex-number {
    font-size: 10px !important;
    color: #aaa !important;
    font-weight: 800;
}

/* Ã‰tats des quÃªtes */
.quest-card.accepted {
    border-left-color: #3b82f6;
    background: #f8fafc;
}

.quest-card.completed {
    border-left-color: #22c55e;
    background: #f0fdf4;
    border-color: #bbf7d0;
    animation: none;
}

/* En-tÃªte de la carte */
.quest-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
}

.quest-title {
    font-weight: 700;
    color: #1e293b;
    justify-content: space-between;
    font-size: 13px;
    /* AugmentÃ© de 12px */
}

.quest-badge {
    font-size: 9px;
    /* AugmentÃ© de 8px */
    padding: 1px 6px;
    border-radius: 8px;
    font-weight: bold;
    text-transform: uppercase;
}

.badge-easy {
    background: #dcfce7;
    color: #166534;
}

.badge-medium {
    background: #dbeafe;
    color: #1e40af;
}

.badge-hard {
    background: #fae8ff;
    color: #86198f;
}

.badge-extreme {
    background: #ffe4e6;
    color: #9f1239;
}

.quest-description {
    font-size: 11px;
    color: #ccc !important;
    margin-bottom: 8px;
    line-height: 1.3;
}


/* Barre de progression */
.quest-progress-container {
    display: flex;
    /* â¬…ï¸ Essentiel */
    align-items: center;
    /* Alignement vertical au centre */
    gap: 6px;
    margin-bottom: 8px;
}

/* Barre de progression */
.quest-progress-bar {
    flex-grow: 1;
    /* Permet Ã  la barre de s'Ã©tendre et de se compresser si besoin */
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    overflow: hidden;
}

.quest-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #2563eb);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.quest-card.completed .quest-progress-fill {
    background: linear-gradient(90deg, #22c55e, #16a34a);
}

/* Texte de progression */
.quest-progress-text {
    font-size: 10px;
    font-weight: bold;
    color: #fff !important;
    min-width: 50px;
    text-align: right;
    white-space: nowrap;
    flex-shrink: 0;
}

/* Zone de rÃ©compenses */
.quest-rewards {
    background: rgba(0, 0, 0, 0.03);
    padding: 5px 8px;
    border-radius: 5px;
    margin-bottom: 8px;
    font-size: 10px;
    /* AugmentÃ© de 9px */
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.quest-reward-item {
    font-weight: 600;
    color: #334155;
    display: flex;
    align-items: center;
    gap: 2px;
}

/* Actions (Boutons) */
.quest-actions {
    display: flex;
    gap: 6px;
}

.quest-btn {
    flex: 1;
    padding: 6px;
    border-radius: 5px;
    border: none;
    font-weight: 600;
    font-size: 11px;
    /* AugmentÃ© de 10px (sauf Refuse) */
    cursor: pointer;
    transition: all 0.1s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 3px;
}

.btn-accept {
    background: #3b82f6;
    color: white;
}

.btn-accept:hover {
    background: #2563eb;
}

/* BOUTON REFUSER / ABANDONNER (Plus petit et plus discret) */
.btn-refuse {
    background: transparent;
    color: #ef4444;
    border: 1px solid #fca5a5;
    padding: 5px;
    /* RÃ©duit le padding de 6px */
    font-size: 9px;
    /* RÃ©duit Ã  9px (plus petit que le reste) */
}

.btn-refuse:hover {
    background: #fef2f2;
    border-color: #ef4444;
}

.btn-claim {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    width: 100%;
    box-shadow: 0 2px 4px rgba(245, 158, 11, 0.3);
    animation: pulse-reward 1.5s infinite;
}

.btn-claim:hover {
    box-shadow: 0 4px 6px rgba(245, 158, 11, 0.4);
}

@keyframes pulse-reward {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.01);
    }
}

/* Section Quêtes du Professeur Chen (en tête de l'onglet Quêtes) */
.story-quests-section {
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 2px solid #e2e8f0;
}

.story-quests-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
    padding: 14px 16px;
    background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    border: 1px solid #fcd34d;
    border-radius: 12px;
    box-shadow: 0 2px 4px rgba(245, 158, 11, 0.1);
}

.story-quests-header-icon {
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 10px;
}

.story-quest-section-chen {
    width: 56px;
    height: 56px;
    object-fit: contain;
    image-rendering: pixelated;
}

.story-quest-section-chen-fallback {
    display: none;
    font-size: 32px;
}

.story-quest-section-chen-fallback.visible {
    display: block;
}

.story-quests-header-text {
    flex: 1;
    min-width: 0;
}

.story-quests-section-title {
    margin: 0 0 4px 0;
    font-size: 18px;
    font-weight: 700;
    color: #b45309;
}

.story-quests-section-desc {
    margin: 0;
    font-size: 12px;
    color: #64748b;
}

.story-quests-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.quest-card-story {
    box-shadow: 0 2px 6px rgba(245, 158, 11, 0.15);
}

.other-quests-title {
    margin: 20px 0 12px 0;
    font-size: 16px;
    font-weight: 700;
    color: #475569;
}

.story-quest-tab-badge {
    display: inline-block;
    font-size: 12px;
    margin-left: 4px;
    vertical-align: middle;
}

/* --- 3. MODALE DE COMPLÃ‰TION --- */
.quest-completion-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.8);
    /* Fond sombre bleutÃ© */
    z-index: 2000;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(2px);
}

.quest-completion-modal.show {
    display: flex;
}

/* Guide de quête : positionné en bas à gauche pour ne pas masquer le module de capture (centre) */
.quest-guide-modal {
    display: none;
    position: fixed;
    left: 20px;
    bottom: 80px;
    z-index: 1500;
    pointer-events: none;
}

.quest-guide-modal.show {
    display: block;
    pointer-events: auto;
}

.quest-guide-content {
    max-width: 350px !important;
}

.quest-guide-header {
    border: none !important;
    padding: 0 !important;
}

.quest-guide-header h3 {
    margin: 0;
    color: #f59e0b;
    font-size: 16px;
}

.quest-guide-close {
    background: none;
    border: none;
    color: #94a3b8;
    font-size: 24px;
    line-height: 1;
    cursor: pointer;
    padding: 0 4px;
}

.quest-guide-close:hover {
    color: #fff;
}

.quest-guide-body {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px !important;
    padding: 15px !important;
    color: #fff !important;
    font-size: 13px;
    line-height: 1.5;
    margin-bottom: 14px;
    max-height: 280px;
    overflow-y: auto;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

.quest-guide-body .where {
    margin-top: 10px;
    padding: 8px 10px;
    background: rgba(255, 255, 255, 0.1);
    border-left: 4px solid #f59e0b;
    border-radius: 4px;
    font-size: 12px;
    color: #ffd700;
}

.quest-guide-btn {
    background: #5d4a3e !important;
    color: white !important;
    border: 2px solid #3b3b3b !important;
    box-shadow: 0 4px 0 #3b3b3b !important;
}

.quest-completion-content {
    background: #bec3c6 !important;
    padding: 40px;
    border: 4px solid #3b3b3b !important;
    border-radius: 20px;
    text-align: center;
    max-width: 500px;
    width: 90%;
    animation: modal-appear 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

@keyframes modal-appear {
    from {
        transform: scale(0.9);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

.quest-completion-title {
    font-size: 24px;
    color: #16a34a;
    /* Vert succÃ¨s */
    margin-bottom: 10px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.quest-completion-rewards {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    padding: 20px;
    border-radius: 12px;
    margin: 20px 0;
    color: #fff !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

.quest-completion-reward {
    font-size: 16px;
    margin: 8px 0;
    font-weight: 700;
    color: #334155;
}

.narrative-quest-rewards-title {
    font-size: 14px;
    font-weight: 700;
    color: #64748b;
    margin: 12px 0 6px 0;
}

.narrative-quest-completion .narrative-quest-rewards {
    margin-top: 8px;
    padding: 12px;
    border-radius: 8px;
    background: #f1f5f9;
    border: 1px solid #e2e8f0;
}

.narrative-quest-completion .quest-completion-reward {
    font-size: 14px;
    margin: 4px 0;
}

/* --- 4. TIMER DE QUÃŠTE --- */
.quest-timer {
    text-align: center;
    /* Le style est gÃ©rÃ© inline dans le HTML pour le flex, mais voici la base */
    font-weight: 600;
    color: #64748b;
}

.shop-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
}

.shop-item {
    background: linear-gradient(135deg, #f3e5f5 0%, #ce93d8 100%);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid #ab47bc;
    box-shadow: 0 4px 15px rgba(171, 71, 188, 0.3);
}

.shop-item-name {
    font-size: 18px;
    font-weight: bold;
    color: #6a1b9a;
    margin-bottom: 10px;
}

.shop-item-description {
    font-size: 13px;
    color: #ccc !important;
    margin-bottom: 15px;
    line-height: 1.4;
}

.shop-item-cost {
    font-size: 20px;
    font-weight: bold;
    color: #ffd700;
    margin-bottom: 15px;
}

.shop-buy-btn {
    width: 100%;
    padding: 10px;
    background: #5d4a3e !important;
    color: white !important;
    border: 2px solid #3b3b3b !important;
    border-radius: 8px !important;
    font-weight: 800;
    cursor: pointer;
    box-shadow: 0 4px 0 #3b3b3b;
}

.shop-buy-btn:hover:not(:disabled) {
    background: #7a614e !important;
}

.shop-buy-btn:disabled {
    background: #ccc !important;
    cursor: not-allowed;
    box-shadow: none;
}

.active-boosts {
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    color: #3b3b3b !important;
}

.boost-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px;
    margin-bottom: 10px;
    color: #fff !important;
}

.boost-name {
    font-weight: 800;
    color: #4ade80 !important;
}

.boost-timer {
    font-size: 11px;
    color: #aaa !important;
}

/* --- INVENTAIRE STYLE "QUÃŠTES" --- */

.inventory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
    padding: 5px;
}

/* La Carte (Slot) */
.inventory-slot {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 10px 10px 14px 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    aspect-ratio: 1 / 1.1;
    position: relative;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);

    /* Indicateur de RaretÃ© (Bordure basse) */
    border-bottom-width: 4px;
    border-bottom-style: solid;
}

.inventory-slot:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    z-index: 5;
}

/* Couleurs */
.inventory-slot.rarity-common {
    border-bottom-color: #94a3b8;
}

.inventory-slot.rarity-rare {
    border-bottom-color: #3b82f6;
}

.inventory-slot.rarity-epic {
    border-bottom-color: #a855f7;
}

.inventory-slot.rarity-legendary {
    border-bottom-color: #f59e0b;
}

/* IcÃ´ne */
.item-icon {
    font-size: 36px;
    margin: 8px 0;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.05));
    transition: transform 0.2s;
}

.inventory-slot:hover .item-icon {
    transform: scale(1.15);
}

/* Compteur */
.item-count {
    position: absolute;
    top: 6px;
    right: 6px;
    background: #3b3b3b !important;
    color: #fff !important;
    border: 1px solid #111 !important;
    font-size: 10px;
    font-weight: 800;
    padding: 2px 6px;
    border-radius: 12px;
}

/* Nom */
.item-name {
    font-size: 11px;
    color: #3b3b3b !important;
    font-weight: 900;
    text-align: center;
    line-height: 1.4;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Badge Ã‰quipement */
.item-type-badge {
    position: absolute;
    top: 6px;
    left: 6px;
    background: #e0e7ff;
    color: #4338ca;
    font-size: 8px;
    font-weight: 800;
    padding: 2px 5px;
    border-radius: 4px;
    text-transform: uppercase;
}

.inventory-slot.is-held-item {
    background-color: #f8fafc;
}

.stat-boosts-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 10px;
}

.stat-boost-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px;
    padding: 10px 15px;
    color: #fff !important;
}

.stat-boost-name {
    font-weight: 800;
    color: #4ade80 !important;
    display: flex;
    align-items: center;
    gap: 8px;
}

.stat-boost-timer {
    font-size: 11px;
    color: #aaa !important;
    background: rgba(0, 0, 0, 0.3) !important;
    padding: 4px 8px;
    border-radius: 12px;
}

/* âœ… STYLES POUR LE MODAL D'Ã‰CLOSION */
#eggHatchContent.shiny {
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 25%, #ffd700 50%, #ffed4e 75%, #ffd700 100%);
    background-size: 200% 200%;
    animation: shiny-sparkle 2s ease-in-out infinite, gradient-shift 3s ease infinite;
    border: 2px solid #ffd700;
}

#eggHatchContent.legendary {
    background: linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%);
    box-shadow: 0 0 40px rgba(255, 193, 7, 0.8);
    animation: legendary-glow 2s ease-in-out infinite alternate;
}

.egg-hatch-title {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 15px;
}

.egg-hatch-sprite {
    width: 128px;
    height: 128px;
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    margin: 10px auto;
    display: block;
    animation: sprite-float 2s ease-in-out infinite;
}

.egg-hatch-stats {
    background: rgba(0, 0, 0, 0.05);
    padding: 15px;
    border-radius: 10px;
    margin: 20px 0;
    text-align: left;
}

.egg-hatch-stats .creature-stats {
    font-size: 14px;
    color: #333;
    line-height: 1.6;
}

/* âœ… FIN DES STYLES D'Ã‰CLOSION */

/* âœ… STYLES POUR LE MODAL DE GESTION â€” Carte compacte, sans scroll */
#creatureModal .stats-content {
    max-width: 720px;
    max-height: 88vh;
    overflow: hidden;
    padding: 16px 20px;
    display: flex;
    flex-direction: column;
}

#creatureModal .stats-header {
    margin-bottom: 12px;
    padding-bottom: 10px;
    flex-shrink: 0;
}

#creatureModal .stats-header h2 {
    font-size: 1.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.creature-modal-grid {
    display: grid;
    grid-template-columns: 110px 1fr;
    gap: 16px;
    align-items: start;
    flex: 1;
    min-height: 0;
}

.creature-modal-sprite-wrap {
    text-align: center;
    position: sticky;
    top: 0;
}

.creature-modal-sprite {
    width: 96px;
    height: auto;
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 8px;
    border: 1px solid #e5e7eb;
}

.creature-modal-badges {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 4px;
    margin-top: 6px;
}

.creature-modal-badges .type-badge,
.creature-modal-badges .rarity-label {
    font-size: 10px;
    padding: 2px 6px;
}

.creature-modal-main {
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-width: 0;
    min-height: 0;
    overflow-y: auto;
    max-height: calc(88vh - 60px);
}

.creature-modal-tokens {
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 11px;
    text-align: center;
    background: #5d4a3e !important;
    border: 2px solid #3b3b3b !important;
    color: #fff !important;
    font-weight: 800;
}

.creature-modal-stats-box {
    background: #3b3b3b !important;
    padding: 12px 15px !important;
    border-radius: 10px !important;
    border: 2px solid #1a1a1a !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5) !important;
    color: #fff !important;
    margin-bottom: 10px !important;
}

.creature-modal-stats-box .creature-modal-stats-box-title {
    margin: 0 0 10px 0;
    color: #fff !important;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 800;
    border-bottom: 1px solid #555;
    padding-bottom: 5px;
}

.creature-modal-stats-box .stat-iv {
    font-size: 10px;
    color: #475569;
    font-weight: 700;
    background: #e2e8f0;
    padding: 2px 6px;
    border-radius: 10px;
    display: inline-block;
    margin-left: 4px;
}

.creature-modal-stats-box .stat-iv-tooltip {
    cursor: help;
    border: none;
    transition: all 0.2s;
}

.creature-modal-stats-box .stat-iv-tooltip:hover {
    background: #cbd5e1;
    color: #1e293b;
}

.creature-modal-stats-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px 16px;
    font-size: 12px;
    line-height: 1.6;
}

.creature-modal-stats-row strong {
    color: #aaa !important;
    font-weight: 700;
}

.creature-modal-stats-row .stat-value {
    color: #fff !important;
    font-weight: 800;
}

.creature-modal-stats-row .stat-item-inner {
    display: flex;
    align-items: center;
    gap: 4px;
    flex-wrap: wrap;
}

.creature-modal-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

.creature-modal-info-box {
    background: #f8fafc;
    padding: 8px 10px;
    border-radius: 6px;
    border-left: 3px solid #667eea;
}

.creature-modal-info-box h5 {
    margin: 0 0 4px 0;
    color: #667eea;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.creature-modal-info-box p,
.creature-modal-info-box .modal-move-details {
    margin: 0;
    font-size: 12px;
    line-height: 1.35;
}

.modal-move-details {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.move-name {
    font-weight: bold;
    font-size: 13px;
}

.move-category {
    font-style: italic;
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 4px;
}

.move-category.physical {
    background-color: #dc2626;
    color: white;
    font-weight: 800;
    font-style: normal;
}

.move-category.special {
    background-color: #2563eb;
    color: white;
    font-weight: 800;
    font-style: normal;
}

.move-power {
    font-size: 11px;
    color: #6b7280;
}

.creature-modal-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 6px;
    font-size: 11px;
    line-height: 1.4;
}

.creature-modal-info>div {
    background: #f4f4f5;
    padding: 6px 8px;
    border-radius: 6px;
    border-left: 3px solid #8b5cf6;
}

.creature-modal-info>div strong {
    font-size: 11px;
}

.creature-modal-info span[style*="font-size: 12px"] {
    font-size: 10px !important;
    color: #555;
}

.creature-modal-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding-top: 10px;
    border-top: 1px solid #e5e7eb;
    margin-top: 4px;
    flex-shrink: 0;
}

.creature-modal-actions .btn {
    flex: 1;
    min-width: 90px;
    font-size: 12px;
    padding: 8px 10px;
}

/* Objet tenu dans le modal */
.creature-modal-info .held-item-slot {
    padding: 6px 8px;
    font-size: 11px;
}

.creature-modal-info .held-item-slot div[style*="font-size:10px"] {
    font-size: 9px !important;
}

/* âœ… FIN DES STYLES DE GESTION */
/* âœ… SÃ‰LECTEURS MODIFIÃ‰S pour inclure Stockage et Pension */
#teamList,
#storageList,
#pensionList {
    /* auto-fill est mieux pour le stockage/pension */
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 8px;
    margin-bottom: 15px;
}

/* On force la grille de l'Ã©quipe Ã  3 colonnes fixes */
#teamList {
    grid-template-columns: repeat(3, 1fr);
}

/* On applique le style de carte aux trois sections */
#teamList .creature-card,
#storageList .creature-card,
#pensionList .creature-card {
    padding: 8px;
    text-align: center;
    cursor: pointer;
    min-height: 110px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: all 0.2s ease;
}

#teamList .creature-card:hover,
#storageList .creature-card:hover,
#pensionList .creature-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* Styles spÃ©cifiques (actifs, KO) - s'appliquent surtout Ã  teamList */
#teamList .creature-card.active {
    border-color: #22c55e;
    background: #e0f8e9;
    box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
}

#teamList .creature-card.fainted {
    filter: grayscale(100%);
    opacity: 0.6;
    background: #f0f0f0;
}

/* Le reste des styles de slot est inchangÃ© */
.team-slot-sprite {
    width: 64px;
    height: 64px;
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    margin-bottom: 3px;
}

.team-slot-name {
    font-size: 14px;
    font-weight: 800;
    color: #3b3b3b !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.team-slot-level {
    font-size: 12px;
    color: #555 !important;
}

.team-slot-info {
    font-size: 11px;
    font-weight: 800;
    color: #3b3b3b !important;
    display: flex;
    justify-content: space-between;
    width: 100%;
    margin-top: 5px;
    padding: 0 5px;
}

/* C'est le "bouton vide" */
.team-slot-empty {
    padding: 10px;
    background: rgba(0, 0, 0, 0.05);
    border: 1px dashed #ccc;
    border-radius: 10px;
    min-height: 120px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    color: #ccc;
    font-weight: bold;
    cursor: default;
}

/* âœ… FIN DES NOUVEAUX STYLES */

/* âœ… NOUVEAUX STYLES POUR LE RÃ‰SUMÃ‰ DES TALENTS */

/* Conteneur principal */
#activeTalentsDisplay {
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 20px;
    box-shadow: 0 4px 0 #3b3b3b;
}

#activeTalentsDisplay h3 {
    margin: 0 0 10px 0;
    color: #3b3b3b !important;
    font-weight: 800;
    font-size: 16px;
    text-transform: uppercase;
}

/* La nouvelle grille pour les talents */
.talent-summary-grid {
    display: grid;
    /* S'adapte au nombre de talents, avec une taille min/max */
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 8px;
}

/* La "carte" individuelle pour chaque talent */
.talent-chip {
    padding: 8px 10px;
    border-radius: 8px;
    border: 2px solid #3b3b3b !important;
    background: #3b3b3b !important;
    color: #fff !important;
    transition: all 0.2s ease;
}

.talent-chip:hover {
    transform: scale(1.03);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.talent-chip-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    font-size: 13px;
}

.talent-chip-effect {
    font-size: 12px;
    font-weight: bold;
    color: #22c55e;
    /* Bonus en vert */
    margin-top: 5px;
}

/* Couleurs basÃ©es sur la raretÃ© du talent */
.talent-chip.epic {
    border-color: #9333ea;
    color: #9333ea;
}

.talent-chip.legendary {
    border-color: #ffd700;
    color: #b45309;
    /* Couleur foncÃ©e pour le texte sur fond clair */
}

/* âœ… FIN DES NOUVEAUX STYLES */




/* Le nouveau HUD */
.battle-hud {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    margin-bottom: 10px;
}

.hud-player,
.hud-enemy {
    position: relative;
    /* Pour le bouton ultime */
}

/* On rÃ©-applique le style du bouton ultime pour le HUD */
.hud-player .ultimate-btn {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
}

.hud-stats {
    font-size: 14px;
    font-weight: 800;
    color: #fff !important;
    margin-top: 10px;
    display: flex;
    gap: 15px;
    justify-content: center;
}

.hud-stats span {
    display: flex;
    align-items: center;
    gap: 4px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}



/* On cache l'ancien bouton ultime (qui est maintenant dans le HUD) */
.main-fighter-display #ultimateButton {
    display: none;
}

/* âœ… FIN DES MODIFICATIONS DE SCÃˆNE */

/* --- COLONNE DROITE (EXTRAS) --- */

.secondary-content {
    display: flex !important;
    flex-direction: column;
    background: #947864 !important;
    border-left: 4px solid #5d4a3e !important;
    padding: 0 !important;
    overflow: hidden;
    position: relative;
}

/* Barre des Onglets (Fixe en haut) */
.tabs-container {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    padding: 10px;
    background: #bec3c6 !important;
    /* Retro gray background for tab bar */
    border-bottom: 3px solid #3b3b3b !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    z-index: 5;
    flex-shrink: 0;
}

/* Boutons d'onglets */
.tab-btn {
    flex: 1 1 auto;
    text-align: center;
    padding: 8px 12px;
    font-size: 11px;
    font-weight: 800;
    color: #fff !important;
    background: #5d4a3e !important;
    border: 2px solid #3b3b3b !important;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.1s ease;
    position: relative;
    box-shadow: 0 3px 0 #3b3b3b;
    text-transform: uppercase;
}

.tab-btn:hover {
    background: #7a614e !important;
    transform: translateY(1px);
    box-shadow: 0 2px 0 #3b3b3b;
}

.tab-btn.active {
    background: #3b3b3b !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5) !important;
    transform: translateY(2px) !important;
    border-color: #1a1a1a !important;
}

/* Le Badge de notification (petit point rouge) */
.notification-badge {
    top: 2px;
    right: 2px;
    border: 2px solid white;
    /* Petit contour blanc pour dÃ©tacher */
}

/* Zone de contenu des onglets */
.tab-content {
    display: none;
    padding: 15px;
    overflow-y: auto;
    height: 100%;
    background: #947864 !important;
    /* Ensure brown background */
    animation: fadeIn 0.3s ease;
}

.tab-content.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Sous-onglets de la boutique (Ã‰picerie, Jetons...) */
.sub-tabs-container {
    display: flex;
    gap: 5px;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 3px solid #3b3b3b !important;
    overflow-x: auto;
    white-space: nowrap;
}

.sub-tab-btn {
    background: #5d4a3e !important;
    color: white !important;
    border: 2px solid #3b3b3b !important;
    box-shadow: 0 3px 0 #3b3b3b !important;
}

.sub-tab-btn.active {
    background: #3b3b3b !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5) !important;
    transform: translateY(2px) !important;
}

/* Grille des Upgrades et Objets */
.upgrades-container,
.shop-container,
.items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    /* Cartes plus petites et adaptatives */
    gap: 12px;
}

/* Style de la Carte (GÃ©nÃ©rique) */
.upgrade-card,
.shop-item,
.item-card {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-bottom: 4px solid #111 !important;
    border-radius: 8px !important;
    padding: 12px !important;
    color: white !important;
    transition: transform 0.1s !important;
}

.upgrade-card:hover,
.shop-item:hover,
.item-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-color: #cbd5e1;
}

/* Titres et Textes dans les cartes */
.upgrade-title,
.shop-item-name {
    font-size: 13px;
    font-weight: 800;
    color: #fff !important;
    font-family: 'Outfit', sans-serif;
}

.upgrade-desc,
.shop-item-desc {
    font-size: 11px;
    color: #ccc !important;
    line-height: 1.4;
    flex-grow: 1;
    /* Pousse le bouton vers le bas */
}

/* Prix et Boutons */
.upgrade-cost,
.shop-item-cost {
    font-size: 12px;
    font-weight: bold;
    color: #d97706;
    /* Orange/Or */
    margin-bottom: 8px;
}

.upgrade-btn,
.shop-buy-btn {
    width: 100%;
    padding: 8px;
    font-size: 11px;
    border-radius: 6px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}


/* Classe pour les images d'objets */
.item-sprite-img {
    width: 32px;
    height: 32px;
    image-rendering: pixelated;
    /* Garde le look rÃ©tro net */
    filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.2));
    vertical-align: middle;
}

/* Ajustement pour l'inventaire */
.inventory-slot .item-icon img {
    width: 48px;
    /* Un peu plus grand dans l'inventaire */
    height: 48px;
}


/* âœ… STYLES POUR LE SÃ‰LECTEUR DE ZONE */
/* âœ… SÃ‰LECTEUR DE ZONE (Une seule ligne forcÃ©e) */
.zone-selector {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    gap: 15px;
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
    border-radius: 8px !important;
    padding: 12px 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 0 #3b3b3b;
    white-space: nowrap;
}

.zone-selector label {
    font-weight: 800;
    color: #3b3b3b;
    font-size: 12px;
    text-transform: uppercase;
    flex-shrink: 0;
    font-family: 'Outfit', sans-serif;
}

.zone-selector select {
    padding: 6px 12px;
    border: 2px solid #3b3b3b;
    border-radius: 6px;
    font-weight: 700;
    color: white;
    background-color: #3b3b3b;
    cursor: pointer;
    flex-grow: 1;
    font-family: 'Outfit', sans-serif;
}


.zone-info {
    margin: 0;
    font-size: 13px;
    color: #64748b;
    font-weight: 500;

    /* Style de sÃ©paration */
    border-left: 2px solid #e2e8f0;
    padding-left: 15px;
    flex-shrink: 0;
    /* EmpÃªche les infos d'Ãªtre Ã©crasÃ©es */
}

.zone-progress-bar {
    width: 100%;
    height: 12px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 6px;
    margin-top: 8px;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.2);
}

.zone-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #ffd700, #f59e0b);
    transition: width 0.5s ease;
}

.zone-progress-text {
    font-size: 12px;
    font-weight: bold;
    margin-top: 4px;
}

/* âœ… FIN DES STYLES DE ZONE */

/* âœ… AJOUTER CE CSS POUR LE "JUICE" DE COMBAT */
@keyframes attack-lunge {
    0% {
        transform: translateX(0);
    }

    50% {
        transform: translateX(20px);
    }

    100% {
        transform: translateX(0);
    }
}

/* Le sprite du joueur (Ã  gauche) "fonce" vers la droite */
#playerSprite.attack-lunge {
    animation: attack-lunge 0.3s ease-out;
}

/* L'ennemi (Ã  droite) "fonce" vers la gauche */
#enemySprite.attack-lunge {
    /* On utilise 'reverse' pour qu'il aille dans l'autre sens */
    animation: attack-lunge 0.3s ease-out reverse;
}

@keyframes take-hit {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.3;
    }
}

.battle-sprite.take-hit {
    animation: take-hit 0.2s ease-in-out;
}

/* âœ… AJOUTER CE STYLE */
.tab-btn,
#toggleIcon {
    position: relative;
    /* NÃ©cessaire pour positionner le badge */
}

.notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 12px;
    height: 12px;
    background-color: #ef4444;
    border-radius: 50%;
    border: 1px solid white;
    animation: pulse-reward 1.5s infinite;
}

/* Style pour le modal des tiers de zone */
#zoneTierModalGrid .creature-card {
    padding: 10px;
    text-align: center;
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid #ddd;
    border-radius: 10px;
}

/* On rÃ©duit la taille des sprites pour ce modal */
#zoneTierModalGrid .team-slot-sprite {
    width: 64px;
    height: 64px;
    margin-bottom: 5px;
}

#zoneTierModalGrid .team-slot-name {
    font-size: 12px;
    font-weight: bold;
    color: #333;
}

/* 1. La Grille : On serre les colonnes (85px de large au minimum) */
#storageList {
    grid-template-columns: repeat(auto-fill, minmax(85px, 1fr)) !important;
    gap: 6px !important;
}

/* 2. La Carte : On rÃ©duit les marges internes */
#storageList .creature-card {
    padding: 4px !important;
    min-height: 80px !important;
    /* Hauteur rÃ©duite */
}

/* 3. L'Image (Sprite) : On passe de 48px Ã  32px */
#storageList .team-slot-sprite {
    width: 36px !important;
    height: 36px !important;
    margin-bottom: 2px !important;
}

/* 4. Les Textes : On rÃ©duit la police pour que Ã§a rentre */
#storageList .team-slot-name {
    font-size: 10px !important;
    margin-bottom: 1px !important;
    width: 100%;
    /* Assure que l'ellipse fonctionne */
}

#storageList .team-slot-level {
    font-size: 9px !important;
    margin-bottom: 2px !important;
}

#storageList .team-slot-info {
    font-size: 9px !important;
    letter-spacing: -0.5px;
    /* Resserre un peu les caractÃ¨res */
}

/* Cacher la barre d'XP dans le stockage pour gagner de la place (Optionnel) */
#storageList .exp-bar {
    height: 4px !important;
    margin-top: 2px !important;
}

/* --- AJUSTEMENT SPÃ‰CIFIQUE PENSION --- */

/* Force les sprites de la pension Ã  48px */
#pensionList .team-slot-sprite {
    width: 48px !important;
    height: 48px !important;
    margin-bottom: 3px !important;
}

/* Optionnel : Ajuste la grille de la pension pour qu'elle soit adaptÃ©e Ã  cette taille */
/* (Un peu plus large que le stockage compact pour aÃ©rer) */
#pensionList {
    grid-template-columns: repeat(auto-fill, minmax(95px, 1fr)) !important;
}

/* La nouvelle barre de progression pour les tiers */
.tier-progress-bar {
    width: 100%;
    height: 8px;
    background: #ddd;
    border-radius: 4px;
    overflow: hidden;
    margin-top: 5px;
}

.tier-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #22c55e, #16a34a);
    transition: width 0.3s ease;
}

.zone-objective {
    background: rgba(0, 0, 0, 0.1);
    padding: 8px 12px;
    border-radius: 8px;
    margin-bottom: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
}

.zone-objective-label {
    font-weight: bold;
    color: #333;
}

.zone-objective-progress {
    font-weight: bold;
    color: #16a34a;
}

.zone-objective-progress.incomplete {
    color: #ef4444;
}

.zone-details-btn {
    font-size: 11px;
    padding: 3px 8px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.zone-details-btn:hover {
    background: #5a67d8;
}

/* ======================================== */
/* == CSS POUR FEEDBACK DE COMBAT (AJOUTÃ‰) == */
/* ======================================== */


/* --- SCÃˆNE DE COMBAT (UnifiÃ©) --- */

/* Le conteneur global */
.battle-display {
    height: 180px;
    background: linear-gradient(to bottom, #78C850 0%, #78C850 60%, #E0E0E0 60%, #E0E0E0 100%) !important;
    margin-bottom: 20px;
    padding: 0 40px;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    border-radius: 8px;
    border: 3px solid #3b3b3b;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.1);
}

.battle-display::before {
    content: '';
    position: absolute;
    top: 55%;
    left: -10%;
    width: 120%;
    height: 10px;
    background: rgba(0, 0, 0, 0.1);
    z-index: 1;
}

.creature-display {
    position: relative;
    text-align: center;
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 10px;
}

.sprite-platform {
    position: absolute;
    bottom: 5px;
    width: 140px;
    height: 40px;
    background: radial-gradient(ellipse at center, #A8C898 0%, #70A070 100%);
    border-radius: 50%;
    border: 2px solid #3b3b3b;
    z-index: 1;
    box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
}

.sprite-platform.player {
    left: 50%;
    transform: translateX(-50%) skew(-10deg);
}

.sprite-platform.enemy {
    left: 50%;
    transform: translateX(-50%) skew(10deg);
}

/* L'image du PokÃ©mon */
.battle-sprite {
    width: 144px;
    height: 144px;
    image-rendering: pixelated;
    position: relative;
    z-index: 2;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.3));
    transition: transform 0.1s;
}


/* OPTIMISATION : Style de base plus lisible et centrÃ© */
/* OPTIMISATION : Style "Clean RPG" (Lisible et Fluide) */
.floating-text {
    position: absolute;
    left: 50%;
    /* CentrÃ© horizontalement, pas de scale */
    transform: translateX(-50%);

    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 20px;
    /* Taille raisonnable */
    font-weight: 700;
    pointer-events: none;

    /* Ombre portÃ©e simple pour le contraste */
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);

    z-index: 100;
    will-change: transform, opacity;

    /* Animation fluide vers le haut */
    animation: float-fade 1s ease-out forwards;
}

/* NOUVELLE ANIMATION : MontÃ©e simple et fondu */
@keyframes float-fade {
    0% {
        opacity: 1;
        transform: translate(-50%, 0);
    }

    20% {
        opacity: 1;
        /* Reste visible un moment */
        transform: translate(-50%, -15px);
    }

    100% {
        opacity: 0;
        transform: translate(-50%, -60px);
        /* Finit plus haut */
    }
}

/* Couleurs (Plus douces) */
.ft-damage-enemy {
    color: #ff8a80;
}

.ft-damage-player {
    color: #ff8a80;
}

/* Rouge clair (fallback) */
.ft-damage-physical {
    color: #ea580c;
}

/* Orange â€” dÃ©gÃ¢ts physiques */
.ft-damage-special {
    color: #7c3aed;
}

/* Violet â€” dÃ©gÃ¢ts spÃ©ciaux */
.ft-heal {
    color: #69f0ae;
}

/* Vert menthe */
.ft-status {
    color: #e040fb;
}

/* Violet */

/* Critique : Juste un peu plus gros, pas de rotation folle */
.ft-crit {
    font-size: 24px;
    color: #ffca28;
    /* Or */
    text-shadow: 0 0 3px #e65100, 1px 1px 2px black;
    z-index: 101;
}

/* --- CSS pour le Recycleur --- */
.recycler-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    /* On s'assure qu'il utilise bien la hauteur de l'onglet */
    height: 100%;
    max-height: 330px;
    /* Hauteur max avant scroll */
}

.recycler-list,
.recycler-shop {
    padding: 15px;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 8px;
    overflow-y: auto;
}

.recycler-header {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 2px solid #ddd;
}

.recycler-header .essence-count {
    font-size: 20px;
    color: #a855f7;
}

.recycler-item,
.dust-shop-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background: #bec3c6 !important;
    border: 2px solid #3b3b3b !important;
    border-radius: 6px;
    margin-bottom: 8px;
    box-shadow: 0 4px 0 #3b3b3b;
    color: #3b3b3b !important;
    font-weight: 800;
}

.recycler-item-name {
    font-weight: bold;
    font-size: 13px;
}

.recycler-item-name .rarity-label {
    font-size: 9px;
    padding: 2px 5px;
    margin-left: 5px;
}

.recycler-btn {
    padding: 5px 10px;
    font-size: 11px;
    background: #a855f7;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

.recycler-btn:hover {
    background: #9333ea;
}

.dust-shop-item .shop-buy-btn {
    background: #a855f7;
    padding: 8px 12px;
    font-size: 12px;
}

.dust-shop-item .shop-buy-btn:hover {
    background: #9333ea;
}

/* --- NOUVEAU : Animation pour Prestige PrÃªt --- */
@keyframes prestige-glow {
    from {
        /* Une lueur dorÃ©e/jaune pour correspondre Ã  l'Ã©toile de prestige */
        box-shadow: 0 0 5px rgba(128, 208, 208, 0.2);
        border-color: #c1e3e3;
    }

    to {
        box-shadow: 0 0 30px rgba(128, 208, 208, 1.2),
            inset 0 0 15px rgba(255, 255, 255, 1);
        border-color: #8ec2c2;
    }
}

.creature-card.prestige-ready {
    border: 3px solid #80d0d0;
    /* Applique l'animation en boucle */
    animation: prestige-glow 1s ease-in-out infinite alternate;
}

/* Nouveau style pour le conteneur de synergies dans l'en-tÃªte */
.synergy-container-header {
    display: flex;
    gap: 8px;
    /* On enlÃ¨ve le fond gris et les bordures de l'ancien style */
    background: transparent;
    padding: 0;
    border: none;
}

/* Modification des badges pour qu'ils soient cliquables */
.synergy-badge {
    cursor: pointer;
    /* Curseur main */
    transition: transform 0.2s, box-shadow 0.2s;
    user-select: none;
    /* EmpÃªche la sÃ©lection de texte */
}

.synergy-badge:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    background-color: #f0f9ff;
    /* LÃ©gÃ¨re teinte au survol */
}

.synergy-badge:active {
    transform: scale(0.95);
}

/* --- Styles pour le Slot d'Objet --- */
.held-item-slot {
    margin-top: 15px;
    padding: 10px;
    background: #bec3c6 !important;
    border: 3px dashed #3b3b3b !important;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
    color: #3b3b3b !important;
    font-weight: 800;
}

.held-item-slot:hover {
    background: #a8adb0 !important;
    border-color: #1a1a1a !important;
}

.held-item-slot.equipped {
    border: 3px solid #3b3b3b !important;
    background: #bec3c6 !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2) !important;
}

.item-select-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 10px;
    margin-top: 10px;
}

.item-select-card {
    padding: 8px;
    background: #5d4a3e !important;
    border: 2px solid #3b3b3b !important;
    border-radius: 6px;
    text-align: center;
    cursor: pointer;
    font-size: 11px;
    color: white !important;
    font-weight: 800;
}

.item-select-card:hover {
    background: #7a614e !important;
    transform: translateY(-1px);
}

/* Grille pour la liste des synergies */
.synergy-list-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
    max-height: 60vh;
    overflow-y: auto;
    padding-right: 5px;
}

/* Carte individuelle de synergie */
.synergy-list-card {
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 10px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    opacity: 1;
    /* GrisÃ© par dÃ©faut */
    transition: all 0.3s ease;
}

/* Style quand la synergie est active */
.synergy-list-card.active {
    opacity: 1;
    background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
    border: 2px solid #0ea5e9;
    box-shadow: 0 4px 12px rgba(14, 165, 233, 0.2);
    transform: translateY(-2px);
}

.synergy-list-icon {
    font-size: 32px;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 50%;
}

.synergy-list-info {
    flex: 1;
}

.synergy-list-title {
    font-weight: bold;
    font-size: 16px;
    color: #333;
    margin-bottom: 4px;
    display: flex;
    justify-content: space-between;
}

.synergy-list-desc {
    font-size: 12px;
    color: #666;
    line-height: 1.4;
}

.synergy-progress {
    font-size: 11px;
    font-weight: bold;
    color: #888;
    margin-top: 6px;
    text-transform: uppercase;
}

.synergy-list-card.active .synergy-progress {
    color: #0284c7;
}

/* Styles pour le choix du Starter */
.starter-card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    border: 3px solid transparent;
}

.starter-card:hover {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
}

.starter-card:hover h2 {
    transform: scale(1.1);
}

.starter-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100px;
    opacity: 0.2;
    z-index: 0;
}

.starter-bg.grass {
    background: #4caf50;
}

.starter-bg.fire {
    background: #f44336;
}

.starter-bg.water {
    background: #2196f3;
}

.starter-sprite {
    width: 144px;
    height: 144px;
    image-rendering: pixelated;
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
    transition: transform 0.3s;
}

.starter-card:hover .starter-sprite {
    transform: scale(1.2);
    animation: sprite-float 1s infinite ease-in-out;
}

.starter-card {
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-bottom: 5px solid #111 !important;
    border-radius: 12px !important;
    padding: 20px !important;
    color: white !important;
    transition: transform 0.2s !important;
    cursor: pointer !important;
    box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2) !important;
}

.starter-card:hover {
    transform: translateY(-5px) !important;
    background: #444 !important;
}

.starter-card h2 {
    color: #fff !important;
    font-weight: 800 !important;
    margin-top: 10px !important;
}

.starter-card p {
    color: #ccc !important;
    font-size: 12px !important;
}

/* Styles pour les Buffs de Tour */
.tower-buffs-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    margin-bottom: 15px;
    padding: 8px;
    background: rgba(255, 255, 255, 0.5);
    border-radius: 10px;
    border: 1px dashed #667eea;
    animation: slideIn 0.3s ease;
}

.tower-buff-chip {
    font-size: 11px;
    padding: 4px 10px;
    border-radius: 15px;
    font-weight: bold;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    gap: 5px;
}

.buff-atk {
    background: #ffebee;
    color: #c62828;
    border: 1px solid #ffcdd2;
}

.buff-def {
    background: #e3f2fd;
    color: #1565c0;
    border: 1px solid #bbdefb;
}

.buff-crit {
    background: #fff8e1;
    color: #f57f17;
    border: 1px solid #ffecb3;
}

.buff-life {
    background: #f3e5f5;
    color: #7b1fa2;
    border: 1px solid #e1bee7;
}

.buff-special {
    background: #e8f5e9;
    color: #2e7d32;
    border: 1px solid #c8e6c9;
}

/* RaretÃ© des Reliques */
.relic-card {
    padding: 15px;
    border-radius: 10px;
    background: white;
    text-align: center;
    cursor: pointer;
    position: relative;
    border: 3px solid transparent;
    transition: transform 0.2s;
}

.relic-card:hover {
    transform: translateY(-5px);
}

.relic-common {
    border-color: #bdc3c7;
    background: linear-gradient(to bottom right, #ffffff, #f0f0f0);
}

.relic-rare {
    border-color: #3498db;
    background: linear-gradient(to bottom right, #ffffff, #e1f5fe);
}

.relic-epic {
    border-color: #9b59b6;
    background: linear-gradient(to bottom right, #ffffff, #f3e5f5);
}

.relic-legendary {
    border-color: #f1c40f;
    background: linear-gradient(to bottom right, #fffde7, #fff9c4);
    box-shadow: 0 0 15px rgba(241, 196, 15, 0.4);
}

.relic-badge {
    position: absolute;
    top: -10px;
    right: -10px;
    padding: 3px 8px;
    border-radius: 10px;
    color: white;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
}

.badge-common {
    background: #95a5a6;
}

.badge-rare {
    background: #3498db;
}

.badge-epic {
    background: #9b59b6;
}

.badge-legendary {
    background: #f39c12;
}

/* --- STYLE DU MODE TOUR (AMÃ‰LIORÃ‰) --- */

/* --- STYLE DU MODE TOUR (SOBRE & Ã‰PURÃ‰) --- */

.zone-selector.tower-mode {
    /* Fond : Un gris-bleu nuit profond et mat (Style "Slate") */
    background: #1e293b !important;

    /* Bordure : TrÃ¨s fine et subtile, juste pour dÃ©finir la forme */
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 10px !important;

    /* Ombre : Douce et diffuse pour dÃ©tacher l'Ã©lÃ©ment du fond */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;

    /* Mise en page */
    display: flex !important;
    justify-content: center;
    align-items: center;
    padding: 15px !important;
    min-height: 60px;

    /* Pas d'animation qui clignote */
    transition: all 0.3s ease;
}

/* On cache proprement les Ã©lÃ©ments inutiles */
.zone-selector.tower-mode label,
.zone-selector.tower-mode select,
.zone-selector.tower-mode .zone-progress-bar {
    display: none !important;
}

/* Le Texte : Propre, lisible, moderne */
.zone-selector.tower-mode .zone-info {
    color: #f8fafc !important;
    /* Blanc cassÃ© (plus doux que #FFF) */

    /* Police systÃ¨me moderne (sans-serif) */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important;

    font-size: 16px !important;
    font-weight: 600 !important;
    /* Semi-bold */
    letter-spacing: 1.5px;
    /* Espacement des lettres pour l'Ã©lÃ©gance */
    text-transform: uppercase;
    margin: 0 !important;

    /* Pas d'ombres de texte agressives */
    text-shadow: none !important;
}


.squad-selected {
    border: 2px solid #22c55e !important;
    background-color: #dcfce7 !important;
    transform: scale(0.98);
}

.squad-counter {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
    z-index: 10002;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: flex;
    gap: 10px;
    align-items: center;
}

/* --- STYLE DES Å’UFS --- */

.egg-sprite {
    width: 64px;
    height: 64px;
    image-rendering: pixelated;
    /* Garde le look rÃ©tro net */
    margin: 0 auto 5px auto;
    display: block;
    transition: transform 0.3s ease;
    animation: egg-float 3s ease-in-out infinite;
}

/* Animation de flottement */
@keyframes egg-float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-6px);
    }
}

.ball-item:hover .egg-sprite {
    transform: scale(1.2) rotate(5deg);
    animation: none;
    /* Pause l'animation au survol */
}

/* --- FILTRES DE COULEUR --- */

/* Common (Vert/Beige de base) : Pas de filtre */

/* Rare (Bleu) */
.egg-filter-rare {
    filter: hue-rotate(180deg) brightness(1.1);
}

/* Epic (Violet/Rose) */
.egg-filter-epic {
    filter: hue-rotate(280deg) saturate(1.2);
}

/* Legendary (DorÃ© Brillant) */
.egg-filter-legendary {
    filter: sepia(1) saturate(3) hue-rotate(10deg) brightness(1.1) drop-shadow(0 0 8px rgba(255, 215, 0, 0.6));
}

/* --- STYLE DE LA CARTE (Rappel) --- */
.ball-item {
    background: linear-gradient(135deg, #ffffff, #f8f9fa);
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    border: 1px solid #e2e8f0;
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
    overflow: hidden;
}

.ball-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
}

/* Bordures colorÃ©es selon la raretÃ© (optionnel si vous voulez renforcer l'effet) */
.ball-item.rarity-common {
    border-bottom: 3px solid #b0bec5;
}

.ball-item.rarity-rare {
    border-bottom: 3px solid #3b82f6;
}

.ball-item.rarity-epic {
    border-bottom: 3px solid #a855f7;
}

.ball-item.rarity-legendary {
    border-bottom: 3px solid #f59e0b;
}


.custom-tooltip {
    display: none;
    /* CachÃ© par dÃ©faut */
    position: fixed;
    z-index: 10000;
    /* Au-dessus de tout */
    background: rgba(20, 20, 20, 0.95);
    border: 1px solid #667eea;
    color: white;
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 12px;
    max-width: 250px;
    pointer-events: none;
    /* La souris passe au travers (trÃ¨s important) */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    white-space: pre-line;
    /* Permet les sauts de ligne avec \n */
}

/* Titre en gras dans l'infobulle */
.tooltip-title {
    font-weight: bold;
    color: #ffd700;
    margin-bottom: 4px;
    font-size: 14px;
    display: block;
}

/* --- STYLE COMPACT POUR LE POKÃ‰DEX --- */
#pokedexList {
    /* Des colonnes plus Ã©troites pour en mettre plus par ligne */
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)) !important;
    gap: 8px !important;
}

#pokedexList .creature-card {
    padding: 8px !important;
    /* Moins de marge intÃ©rieure */
    min-height: auto !important;
    /* Hauteur flexible */
}

/* --- Synergies de Collection (Pokédex) --- */
.collection-synergy-card {
    transition: box-shadow 0.2s ease;
}

.collection-synergy-card:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.collection-synergy-grid img {
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

.collection-synergy-grid .creature-card {
    min-height: auto;
    padding: 6px !important;
}

/* Nouvelle classe pour les petites icÃ´nes (remplace les Ã©mojis) */
.icon-img {
    width: 16px;
    height: 16px;
    vertical-align: middle;
    object-fit: contain;
    display: inline-block;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.2));
}

/* Pour les types, on les veut un peu plus gros parfois */
.type-icon-img {
    width: 20px;
    height: 20px;
    vertical-align: bottom;
}

/* Ajustement pour le Header (Stats) */
.stat-chip .icon-img {
    width: 24px;
    height: 24px;
}

/* --- CONTENEUR DES TALENTS (Style "Clean UI") --- */
#activeTalentsDisplay {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 10px;
    padding: 8px 10px;
    margin-bottom: 10px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
}

/* Le Titre (tout petit et discret) */
.talents-header-title {
    font-size: 10px;
    font-weight: 700;
    color: #94a3b8;
    /* Gris clair */
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* La Grille (Flex pour que les tags se suivent) */
.talent-summary-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* --- LE BADGE (TAG) --- */
.talent-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 7px;
    font-size: 11px;
    font-weight: 500;
    transition: all 0.2s ease;
    cursor: help;
    /* Curseur ? pour indiquer le tooltip */

    /* Style par dÃ©faut (Neutre) */
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    color: #475569;
}

.talent-chip:hover {
    background: white;
    transform: translateY(-1px);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

/* --- VARIANTES SELON RARETÃ‰ (Subtiles) --- */
.talent-chip.epic {
    background: #f3e8ff;
    /* Violet trÃ¨s pÃ¢le */
    border-color: #d8b4fe;
    color: #7e22ce;
}

.talent-chip.legendary {
    background: #fef9c3;
    /* Jaune trÃ¨s pÃ¢le */
    border-color: #fde047;
    color: #b45309;
}

/* Le texte du bonus (+50% XP) */
.talent-bonus-text {
    font-size: 10px;
    opacity: 1;
    margin-left: 4px;
    padding-left: 4px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    /* Petite sÃ©paration */
}




/* Style des barres ATB */
.atb-bar-container {
    width: 100%;
    height: 8px;
    /* On augmente un peu la hauteur pour Ãªtre sÃ»r de la voir */
    background: #1e293b;
    margin-top: 4px;
    border-radius: 3px;
    overflow: visible !important;
    border: 1px solid #000;
    /* Petit bord pour bien dÃ©limiter */
    position: relative;
    /* Important */
    z-index: 1;
}

/* Barre ATB (Bleue) */
.atb-fill {
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
    transform-origin: left;
    transform: scaleX(0);
    /* Commence vide */
    transition: transform 0.1s linear;
    will-change: transform;
    display: block;
    position: relative;
    z-index: 2;
    min-height: 8px;
}

/* --- BOUTON ULTIME : STYLE BOUTIQUE (UPGRADE) --- */
.ult-rect-btn {
    position: relative;
    width: 50px;
    /* Even smaller */
    height: 14px;
    /* Even smaller */
    /* Un peu plus haut, comme un petit bouton */

    /* Fond "Vide" : Clair, comme le fond des cartes d'amÃ©lioration (#e3f2fd en version orange) */
    background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
    border: 1px solid #ffb300;
    /* Bordure nette */
    border-radius: 8px;
    /* Arrondi "Bouton" (comme la boutique) */

    padding: 0;
    overflow: hidden;
    cursor: not-allowed;
    z-index: 10;

    /* Ombre colorÃ©e douce */
    box-shadow: 0 2px 5px rgba(255, 179, 0, 0.2);
    transition: all 0.2s ease;
}

/* La barre de remplissage (DÃ©gradÃ© vif, comme les boutons d'achat) */
/* Barre Ultime (Orange) */
.ult-rect-fill {
    height: 100%;
    width: 100%;
    background: linear-gradient(135deg, #ffca28, #ff8f00);
    transform-origin: left;
    transform: scaleX(0);
    /* Commence vide */
    transition: transform 0.2s ease-out;
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    will-change: transform;
}

/* Le texte */
.ult-rect-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;

    /* Texte foncÃ© pour contraste sur fond clair/orange */
    color: #e65100;
    font-size: 5px;
    font-weight: 300;
    text-transform: uppercase;
    letter-spacing: 0.6px;
    z-index: 2;
    text-shadow: none;
    /* Pas d'ombre noire, pour un look "flat" propre */
}

/* --- Ã‰TAT PRÃŠT (READY) --- */
.ult-rect-btn.ready {
    cursor: pointer;
    border-color: #ff6f00;
    /* Lueur externe style "Carte rare" */
    box-shadow: 0 2px 6px rgba(255, 160, 0, 0.4);
    transform: translateY(0);
}

.ult-rect-btn.ready .ult-rect-fill {
    /* Devient dorÃ© brillant */
    background: linear-gradient(135deg, #ffd700, #ffb300);
}

.ult-rect-btn.ready .ult-rect-content {
    color: #fff;
    /* Texte blanc sur fond dorÃ© */
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.ult-rect-btn.ready:hover {
    transform: translateY(-2px);
    /* Effet "LevÃ©e" au survol */
    box-shadow: 0 4px 8px rgba(255, 160, 0, 0.5);
}

/* --- Ã‰TAT ACTIF (ACTIVE) --- */
.ult-rect-btn.active {
    border-color: #ef4444;
}

.ult-rect-btn.active .ult-rect-fill {
    background: linear-gradient(135deg, #ff5252, #d32f2f);
    /* Rouge style "Reset" */
    width: 100% !important;
}

.ult-rect-btn.active .ult-rect-content {
    color: white;
}

/* FIX : EmpÃªcher le HUD de sauter quand un statut apparaÃ®t */
.status-icons-container {
    /* 1. On rÃ©serve une hauteur fixe (taille d'un Ã©moji + un peu de marge) */
    height: 28px;
    min-height: 28px;

    /* 2. On s'assure que Ã§a ne dÃ©borde pas */
    overflow: hidden;

    /* 3. On centre proprement les icÃ´nes */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;

    /* 4. Petits ajustements visuels */
    margin-top: 4px;
    font-size: 18px;
    /* Taille des Ã©mojis de statut */
}

/* --- UI MODE CAPTURE MANUEL --- */
.capture-layout {
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    /* Gauche: Cible, Droite: Balles */
    gap: 20px;
}

.capture-target-card {
    background: #f8fafc;
    border-radius: 15px;
    padding: 15px;
    text-align: center;
    border: 2px solid #e2e8f0;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.capture-sprite {
    width: 128px;
    height: 128px;
    image-rendering: pixelated;
    animation: float-capture 3s ease-in-out infinite;
    filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
}

@keyframes float-capture {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

.capture-chance-bar {
    width: 100%;
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    margin-top: 5px;
    overflow: hidden;
}

.capture-chance-fill {
    height: 100%;
    transition: width 0.3s ease;
}

.balls-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.ball-select-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px;
    border-radius: 12px;
    border: 2px solid transparent;
    background: white;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    position: relative;
    overflow: hidden;
}

.ball-select-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    border-color: #cbd5e1;
}

.ball-select-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    filter: grayscale(1);
}

.ball-icon-large {
    font-size: 28px;
    margin-bottom: 5px;
}

.ball-count-badge {
    position: absolute;
    top: 5px;
    right: 5px;
    background: #1e293b;
    color: white;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 10px;
    font-weight: bold;
}

/* --- UI MODULE AUTO-CATCHER (Style Porygon) --- */
.porygon-panel {
    background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
    border: 1px solid #6366f1;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 20px;
    color: white;
    box-shadow: 0 4px 15px rgba(49, 46, 129, 0.4);
    position: relative;
    overflow: hidden;
}

.porygon-panel::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.03) 10px, rgba(255, 255, 255, 0.03) 20px);
    pointer-events: none;
}

.porygon-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    position: relative;
    z-index: 1;
}

.porygon-status {
    font-size: 10px;
    font-weight: 800;
    text-transform: uppercase;
    background: #10b981;
    color: #064e3b;
    padding: 4px 8px;
    border-radius: 4px;
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.6);
    animation: blink-status 2s infinite;
}

@keyframes blink-status {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 1;
    }
}

/* --- BARRE DE COMMANDEMENT PREMIUM (VERSION FINALE) --- */
.combat-controls-wrapper {
    display: grid;
    grid-template-columns: 80px 1fr 80px;
    /* Gauche fixe, Centre fluide, Droite fixe */
    gap: 12px;
    margin-top: 15px;
    padding: 8px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
    border: 1px solid #e2e8f0;
    align-items: stretch;
}

/* Style de base des boutons */
.cmd-btn {
    border: none;
    border-radius: 12px;
    font-weight: 700;
    font-size: 11px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #475569;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    position: relative;
    overflow: hidden;
    height: 100%;
    min-height: 56px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.cmd-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.cmd-btn:active:not(:disabled) {
    transform: translateY(0);
}

.cmd-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    filter: grayscale(1);
}

.cmd-icon {
    font-size: 20px;
    margin-bottom: 4px;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.1));
}

/* --- VARIANTES DE COULEURS --- */
.cmd-btn.auto-active {
    background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
    color: #15803d;
    border-color: #86efac;
}

.cmd-btn.capture-off {
    background: #f1f5f9;
    color: #94a3b8;
}

.cmd-btn.capture-all {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #b91c1c;
    border-color: #fca5a5;
}

.cmd-btn.capture-target {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1d4ed8;
    border-color: #93c5fd;
}

.cmd-btn.forfeit {
    background: white;
    border: 2px solid #fee2e2;
    color: #ef4444;
}

.cmd-btn.forfeit:hover {
    background: #fef2f2;
    border-color: #ef4444;
}

/* --- NOUVEAU SÃ‰LECTEUR DE CIBLE (GRID) --- */

/* Le Conteneur principal (CachÃ© par dÃ©faut) */
.target-grid-wrapper {
    display: none;
    background: #f8fafc;
    padding: 8px;
    border-radius: 12px;
    border: 1px solid #cbd5e1;
    margin-top: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 1000;

    /* Animation fluide */
    transform-origin: top;
    transition: all 0.3s ease;
}

/* Classe ajoutÃ©e par JS pour afficher */
.target-grid-wrapper.show {
    display: block !important;
    animation: slideOpen 0.3s ease-out;
}

@keyframes slideOpen {
    from {
        opacity: 0;
        transform: translateY(-10px) scaleY(0.9);
    }

    to {
        opacity: 1;
        transform: translateY(0) scaleY(1);
    }
}

/* La Grille elle-mÃªme */
.target-grid {
    display: grid;
    /* Magie CSS : Remplit la ligne avec autant de cases de 42px que possible */
    grid-template-columns: repeat(auto-fill, minmax(42px, 1fr));
    gap: 6px;
    max-height: 160px;
    /* Scroll vertical si trop de pokÃ©mons */
    overflow-y: auto;
    padding-right: 2px;
    /* Pour la scrollbar */
}

/* LE SLOT (Le bouton carrÃ© avec l'image) */
.target-slot {
    width: 100%;
    aspect-ratio: 1;
    /* Force le carrÃ© parfait */
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    /* Main au survol */
    transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

/* Survol */
.target-slot:hover {
    transform: scale(1.1);
    border-color: #94a3b8;
    z-index: 10;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

/* Ã‰tat SÃ‰LECTIONNÃ‰ (Bleu) */
.target-slot.selected {
    border-color: #3b82f6;
    background: #eff6ff;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
    /* Aura bleue */
}

/* L'image du PokÃ©mon */
.target-slot img {
    width: 32px;
    height: 32px;
    image-rendering: pixelated;
    /* Pixel art net */
    pointer-events: none;
    /* Le clic traverse l'image pour atteindre le bouton */
}

/* Tooltip (Nom au survol) */
.target-slot:hover::after {
    content: attr(data-name);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(15, 23, 42, 0.9);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: bold;
    white-space: nowrap;
    pointer-events: none;
    margin-bottom: 6px;
    z-index: 20;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}



/* Petit badge de token dans le modal */
.prestige-token-badge {
    background: linear-gradient(135deg, #ffd700, #f59e0b);
    color: #fff;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 11px;
    margin-left: 5px;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
}

/* UI Floating Text (Ressources) */
.ui-floating-text {
    position: fixed;
    /* Fixe par rapport Ã  l'Ã©cran, pas au parent */
    font-weight: 800;
    font-size: 14px;
    pointer-events: none;
    /* La souris passe Ã  travers */
    z-index: 10000;
    /* Au-dessus de tout (Header inclus) */
    animation: ui-float-up 1.5s ease-out forwards;
    text-shadow: 1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff;
    /* Contour blanc pour lisibilitÃ© */
}

/* Couleurs spÃ©cifiques */
.ft-money {
    color: #16a34a;
}

/* Vert Dollar */
.ft-token {
    color: #d97706;
}

/* Or Jeton */
.ft-shard {
    color: #a855f7;
}

/* Violet Shard */

@keyframes ui-float-up {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    20% {
        transform: translateY(-5px) scale(1.2);
    }

    /* Petit pop */
    100% {
        opacity: 0;
        transform: translateY(-30px) scale(1);
    }
}

/* 2. Le Badge lui-mÃªme (Rappel pour Ãªtre sÃ»r) */
.atb-stack-badge {
    position: absolute;
    right: 0px;
    /* CollÃ© Ã  droite */
    top: -12px;
    /* RemontÃ© au dessus de la barre */
    background: #ef4444;
    color: white;
    font-size: 10px;
    font-weight: 800;
    padding: 2px 5px;
    border-radius: 10px;
    z-index: 999;
    /* Au dessus de tout */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    pointer-events: none;
    /* Pour ne pas gÃªner les clics */
}

@keyframes bounce {
    from {
        transform: translateY(0);
    }

    to {
        transform: translateY(-3px);
    }
}


/* --- MODAL LOGS : STYLE RPG CLAIR --- */

/* 1. La BoÃ®te Principale */
.log-modal-content {
    background: #1e293b;
    /* Gris-Bleu "Slate 800" (Standard UI) */
    border: 1px solid #475569;
    /* Bordure plus claire */
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
    width: 90%;
    max-width: 600px;
    border-radius: 12px;
    /* Coins plus arrondis */
    overflow: hidden;
    /* Pour que le header ne dÃ©passe pas */
    display: flex;
    flex-direction: column;
}

/* 2. En-tÃªte (Header) */
.modal-header-logs {
    background: #334155;
    /* Un peu plus clair que le fond */
    padding: 15px 20px;
    border-bottom: 1px solid #475569;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header-logs h2 {
    margin: 0;
    font-size: 18px;
    color: #f1f5f9;
    /* Blanc cassÃ© (trÃ¨s lisible) */
    font-weight: 700;
}

/* 3. Zone de texte (Le Journal) */
.log-console-scroll {
    height: 350px;
    overflow-y: auto;
    background: #3b3b3b !important;
    margin: 0;
    padding: 15px 20px;
    font-family: 'Outfit', sans-serif !important;
    font-size: 13px;
    line-height: 1.6;
    border-radius: 8px;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* 4. Les Lignes de texte */
.log-entry {
    padding: 6px 0;
    border-bottom: 1px solid #1e293b;
    /* SÃ©parateur subtil */
    color: #cbd5e1;
    /* Gris clair (Slate 300) - TrÃ¨s lisible */
    transition: background 0.2s;
}

.log-entry:hover {
    background: rgba(255, 255, 255, 0.03);
    /* Petit effet au survol */
}

/* 5. L'heure */
.log-time {
    color: #60a5fa;
    /* Bleu clair pour l'heure (se distingue bien) */
    font-weight: 600;
    font-size: 0.9em;
    margin-right: 8px;
    display: inline-block;
    min-width: 60px;
    /* Aligne le texte proprement */
}

/* 6. Footer (Bouton Vider) */
.modal-footer-logs {
    padding: 10px 20px;
    background: #1e293b;
    border-top: 1px solid #334155;
    text-align: right;
}

/* CORRECTIF VISIBILITÃ‰ : On cible l'ID prÃ©cis pour Ãªtre prioritaire */
#logModal {
    display: none;
    /* CachÃ© par dÃ©faut */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    /* Fond sombre */
    z-index: 10000;
    /* Au-dessus de ABSOLUMENT TOUT */
    align-items: center;
    justify-content: center;
}

/* Quand la classe 'show' est ajoutÃ©e via JS, on force l'affichage */
#logModal.show {
    display: flex !important;
}


/* --- ANIMATIONS DE CAPTURE "JUICY" --- */

/* Le conteneur de l'animation (se superpose au sprite) */
.capture-scene {
    position: relative;
    height: 150px;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    overflow: visible;
}


/* L'effet "Aspiration" (Version Prioritaire) */
.capture-sprite.absorbed {
    /* 1. On coupe l'animation de flottement de force */
    animation: none !important;

    /* 2. L'effet visuel (Silhouette) */
    filter: sepia(1) saturate(5) hue-rotate(-50deg) brightness(1.2) contrast(1.2) !important;

    /* 3. La rÃ©duction physique */
    transform: translateY(50px) scale(0) !important;

    /* 4. L'opacitÃ© finale */
    opacity: 0 !important;

    /* 5. LA CLÃ‰ DU SUCCÃˆS : On force la rÃ¨gle de transition */
    /* Cela empÃªche toute autre rÃ¨gle 'transition: all' de casser notre dÃ©lai */
    transition:
        transform 0.45s ease-in,
        /* Mouvement fluide */
        filter 0.1s linear,
        /* Changement couleur immÃ©diat */
        opacity 0.1s linear 0.35s !important;
    /* Disparition retardÃ©e (FORCE) */
}

/* 1. Ã‰tat par dÃ©faut (En l'air) : Pivot au CENTRE pour tourner rond */
.flying-ball {
    position: absolute;
    width: 48px;
    height: 48px;
    z-index: 10000;
    transform-origin: center center;
    /* Rotation propre pendant le lancer */
}

/* 2. Ã‰tat au sol : Pivot en BAS pour les secousses rÃ©alistes */
.flying-ball.grounded {
    transform-origin: 50% 90%;
    transform: scale(1);
}

/* Lancer en cloche "PrÃ©cision Chirurgicale" (0-20-40-60-80-100) */
@keyframes ball-throw-arc {

    /* 0% : DÃ‰PART (Main du dresseur, bas-gauche) */
    0% {
        transform: translate(-100px, 180px) scale(1.5) rotate(-360deg);
        opacity: 1;
    }

    /* 20% : MONTÃ‰E INITIALE (Rapide) */
    20% {
        transform: translate(-70px, 50px) scale(1.4) rotate(-280deg);
    }

    /* 40% : APPROCHE DU SOMMET (Ralentissement vertical) */
    40% {
        transform: translate(-30px, -35px) scale(1.3) rotate(-200deg);
    }

    /* 60% : APOGÃ‰E (Le point le plus haut, la balle "plane") */
    60% {
        transform: translate(-10px, -50px) scale(1.2) rotate(-120deg);
    }

    /* 80% : CHUTE (AccÃ©lÃ©ration vers la cible) */
    80% {
        transform: translate(-5px, -25px) scale(1.1) rotate(-60deg);
    }

    /* 100% : IMPACT (Centre de la cible) */
    100% {
        transform: translate(0, 0) scale(1) rotate(0deg);
    }
}

/* On garde ta durÃ©e de 15s et on utilise 'linear' car les points clÃ©s font dÃ©jÃ  la courbe */
.anim-throw {
    animation: ball-throw-arc 15s linear forwards;
}

/* Le Rebond (AjustÃ© pour le nouveau pivot) */
@keyframes ball-bounce {
    0% {
        transform: translateY(0) scaleY(1);
    }

    40% {
        transform: translateY(-40px) scaleY(0.9);
    }

    /* S'Ã©tire en montant */
    100% {
        transform: translateY(0) scaleY(1);
    }

    /* S'Ã©crase un peu en atterrissant */
}

@keyframes ball-shake-left {
    0% {
        transform: rotate(0) scale(1);
        filter: brightness(1);
    }

    25% {
        transform: rotate(-35deg) scale(1);
        filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.8)) sepia(0.5) hue-rotate(-50deg);
    }

    50% {
        transform: rotate(0) scale(1);
        filter: brightness(1);
    }

    100% {
        transform: rotate(0) scale(1);
    }
}

@keyframes ball-shake-right {
    0% {
        transform: rotate(0) scale(1);
        filter: brightness(1);
    }

    25% {
        transform: rotate(35deg) scale(1);
        filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.8)) sepia(0.5) hue-rotate(-50deg);
    }

    50% {
        transform: rotate(0) scale(1);
        filter: brightness(1);
    }

    100% {
        transform: rotate(0) scale(1);
    }
}

/* 3. SuccÃ¨s (Lock) */
@keyframes catch-success-dim {
    0% {
        filter: brightness(1);
        transform: scale(1);
    }

    50% {
        filter: brightness(0.5);
        transform: scale(1);
    }

    100% {
        filter: brightness(0.5);
        transform: scale(1);
    }
}

@keyframes catch-stars {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    50% {
        transform: scale(1.5);
        opacity: 1;
    }

    100% {
        transform: scale(2);
        opacity: 0;
    }
}

/* 4. Ã‰chec (Break) */
@keyframes catch-break {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(0.4);
        opacity: 0.5;
        filter: grayscale(1);
    }

    100% {
        transform: scale(0);
        opacity: 0;
    }
}

/* Classes utilitaires JS */
.anim-throw {
    animation: ball-throw-arc 0.6s ease-in forwards;
}

.anim-bounce {
    animation: ball-bounce 0.4s ease-out;
}

.anim-shake-1 {
    animation: ball-shake-left 0.8s ease-in-out;
}

.anim-shake-2 {
    animation: ball-shake-right 0.8s ease-in-out;
}

.anim-shake-3 {
    animation: ball-shake-left 0.8s ease-in-out;
}

.anim-lock {
    animation: catch-success-dim 0.5s forwards;
}

.anim-break {
    animation: catch-break 0.4s ease-out forwards;
}

/* --- MODAL HORS-LIGNE (V2) --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.85);
    /* Plus sombre */
    z-index: 2000;
    display: none;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(5px);
}

.modal-content {
    background: #947864 !important;
    width: 95%;
    max-width: 450px;
    border: 4px solid #5d4a3e !important;
    border-radius: 12px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    font-family: 'Outfit', sans-serif;
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popIn {
    from {
        transform: scale(0.9);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* Header */
.modal-header {
    background: #bec3c6 !important;
    border: 3px solid #3b3b3b !important;
}

.modal-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Body */
.modal-body {
    padding: 15px !important;
    background: #bec3c6 !important;
    max-height: 80vh;
    overflow-y: auto;
}

/* RÃ©sumÃ© Temps */
.offline-summary {
    background: #3b3b3b !important;
    padding: 15px !important;
    text-align: center;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px !important;
    color: #fff !important;
    margin-bottom: 15px !important;
}

.offline-time {
    font-size: 22px !important;
    font-weight: 800 !important;
    color: #4ade80 !important;
}

.offline-subtitle {
    color: #aaa !important;
}

/* Grille Stats Globales */
.stats-row {
    display: flex;
    gap: 10px;
    padding: 15px;
    justify-content: center;
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 8px !important;
    margin-bottom: 15px !important;
}

.mini-stat .val {
    font-weight: 800;
    color: #fff !important;
}

.mini-stat .lbl {
    color: #aaa !important;
}

/* Section Titres */
.section-title {
    padding: 12px 20px 5px;
    font-size: 12px;
    font-weight: 800;
    text-transform: uppercase;
    color: #3b3b3b !important;
    letter-spacing: 0.5px;
}

/* Liste des Objets (Scrollable) */
.loot-scroll-area {
    padding: 0 15px;
    margin-bottom: 15px;
}

.loot-item {
    display: flex;
    align-items: center;
    background: #3b3b3b !important;
    padding: 10px;
    margin-bottom: 8px;
    border-radius: 8px;
    border: 2px solid #1a1a1a !important;
    color: #fff !important;
}

.poke-capture {
    background: #3b3b3b !important;
    border-radius: 8px;
    border: 2px solid #1a1a1a !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

.modal-footer {
    padding: 15px;
    background: #bec3c6 !important;
    border-top: 3px solid #3b3b3b !important;
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
}

.claim-btn {
    background: #5d4a3e !important;
    color: white !important;
    border: 2px solid #3b3b3b !important;
    box-shadow: 0 4px 0 #3b3b3b !important;
}

/* ========== Professor Chen Narrative Engine (cohérent avec le jeu) ========== */
.narrative-overlay {
    position: fixed;
    inset: 0;
    z-index: 10000;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    transition: opacity 0.25s ease-out;
}

.narrative-overlay.narrative-open {
    display: flex;
    opacity: 1;
}

/* Quand Chen parle du bouton des stats, le header (stats) ne doit pas être flouté */
body.narrative-stats-visible .narrative-overlay {
    backdrop-filter: none;
}

body.narrative-stats-visible .header {
    position: relative;
    z-index: 10001;
}

.narrative-overlay.narrative-open .narrative-dialogue {
    animation: narrative-modal-in 0.3s ease-out forwards;
}

@keyframes narrative-modal-in {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(10px);
    }

    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.narrative-dialogue {
    background: #947864 !important;
    border: 4px solid #5d4a3e !important;
    border-radius: 12px;
    max-width: 640px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    padding: 10px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 0 6px 0 #5d4a3e;
    position: relative;
}

.narrative-dialogue::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 15px;
    width: 10px;
    height: 10px;
    background: #ff5f56;
    border-radius: 50%;
    box-shadow: 18px 0 0 #ffbd2e, 36px 0 0 #27c93f;
    border: 1px solid rgba(0, 0, 0, 0.2);
    z-index: 10;
}

.narrative-dialogue-inner {
    display: flex;
    gap: 20px;
    padding: 20px;
    align-items: flex-start;
    background: #f1f5f9 !important;
    /* Fond trÃ¨s clair pour un contraste texte noir optimal */
    border-radius: 8px;
    border: 3px solid #3b3b3b;
    margin-top: 20px;
}

.narrative-chen-column {
    flex-shrink: 0;
    width: 96px;
    height: 96px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #3b3b3b !important;
    border: 2px solid #1a1a1a !important;
    border-radius: 12px;
    position: relative;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

.narrative-chen-sprite {
    width: 96px;
    height: 96px;
    object-fit: contain;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

.narrative-chen-fallback {
    display: none;
    font-size: 48px;
    line-height: 1;
}

.narrative-chen-fallback.narrative-chen-fallback-visible {
    display: block;
}

.narrative-content-column {
    flex: 1;
    min-width: 0;
}

.narrative-speaker {
    color: #854d0e !important;
    font-weight: 800;
    font-size: 14px;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}

.narrative-text {
    color: #3b3b3b !important;
    line-height: 1.6;
    font-size: 15px;
    font-weight: 800;
    margin-bottom: 12px;
    white-space: pre-wrap;
}

.narrative-page-indicator {
    color: #64748b;
    font-size: 12px;
    margin-bottom: 12px;
}

.narrative-actions {
    margin-top: 16px;
}

.narrative-next-btn,
.narrative-close-btn {
    padding: 10px 20px;
    background: #334155;
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
}

.narrative-next-btn:hover,
.narrative-close-btn:hover {
    background: #475569;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.narrative-close-btn {
    background: #334155;
}

.narrative-close-btn:hover {
    background: #475569;
}

.narrative-milestone-overlay {
    z-index: 10001;
}

.narrative-milestone-dialogue {
    max-width: 520px;
}

.narrative-story-quest .narrative-story-quest-title {
    padding: 12px 24px 0;
    font-size: 16px;
    font-weight: 700;
    color: #854d0e !important;
}

.narrative-story-quest .narrative-dialogue-inner {
    padding-top: 12px;
}

.narrative-starters {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
}

.narrative-starter-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px 16px;
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    color: #1e293b;
    cursor: pointer;
    transition: transform 0.15s, border-color 0.15s, box-shadow 0.15s;
}

.narrative-starter-btn:hover {
    border-color: #f59e0b;
    transform: scale(1.05);
    box-shadow: 0 4px 6px -1px rgba(245, 158, 11, 0.2);
}

.narrative-starter-btn img {
    width: 64px;
    height: 64px;
    image-rendering: pixelated;
}

.narrative-continue-btn {
    width: 100%;
    padding: 12px 20px;
    margin-top: 12px;
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s, box-shadow 0.2s;
}

.narrative-continue-btn:hover {
    filter: brightness(1.1);
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

/* Billion finale — EPIC FX */
.narrative-overlay.narrative-epic {
    background: rgba(0, 0, 0, 0.9);
}

.narrative-epic-fx {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.narrative-epic-particles {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.15) 0%, transparent 50%);
    animation: narrative-glow 0.8s ease-in-out infinite alternate;
}

.narrative-epic-shake {
    position: absolute;
    inset: 0;
    animation: narrative-shake 0.15s ease-in-out infinite;
}

.narrative-epic-text {
    position: relative;
    z-index: 2;
    font-size: clamp(24px, 5vw, 48px);
    font-weight: 900;
    color: #fbbf24;
    text-shadow: 0 0 30px rgba(251, 191, 36, 0.8);
    animation: narrative-pulse 0.5s ease-in-out infinite alternate;
}

@keyframes narrative-glow {
    from {
        opacity: 0.6;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1.05);
    }
}

@keyframes narrative-shake {

    0%,
    100% {
        transform: translate(0, 0);
    }

    25% {
        transform: translate(-4px, -2px);
    }

    75% {
        transform: translate(4px, 2px);
    }
}

@keyframes narrative-pulse {
    from {
        transform: scale(1);
        opacity: 0.9;
    }

    to {
        transform: scale(1.1);
        opacity: 1;
    }
}

/* Billion — ugly reveal box */
.narrative-overlay.narrative-reveal {
    background: rgba(0, 0, 0, 0.85);
}

.narrative-ugly-box {
    background: #d1d5db;
    border: 3px solid #6b7280;
    padding: 16px 24px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    color: #111;
    max-width: 320px;
    box-shadow: inset 0 0 0 2px #9ca3af;
}

.narrative-ugly-title {
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 16px;
}

.narrative-ugly-stats {
    letter-spacing: 0.02em;
}